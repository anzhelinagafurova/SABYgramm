{"version":3,"sources":["services/SabygramService.js","components/pages/auth/auth.js","components/helpers/functions.js","components/pages/edit/edit.js","components/chatMenu/chatMenu.js","components/dialogItem/dialogItem.js","components/header/index.js","components/header/header.js","components/addContact/addContact.js","img/3.png","components/pages/settingPage/settingPage.js","img/1.png","img/2.png","components/pages/settingPage/index.js","components/pages/dialogs/dialogs.js","components/msgForm/index.js","components/message/index.js","components/chatWindow/index.js","components/msgHeader/index.js","components/msgHeader/header.js","components/chatApp/index.js","components/pages/contacts/contacts.js","components/inviteFriend/inviteFriend.js","components/pages/cinema/cinema.js","components/test/test.js","components/app/index.js","components/app/app.js","reducers/index.js","store.js","index.js"],"names":["SabygramService","dialogData","id","name","lastMessage","img","timing","this","data","url","fetch","method","headers","body","JSON","stringify","Auth","service","state","phone","password","renderAuthPage","className","onSubmit","sendForm","type","placeholder","maxLength","pattern","required","e","preventDefault","form","currentTarget","props","setProlifePhoto","setUserName","setWelcomeMessage","userInfo","phoneNumber","value","sendDataPost","then","result","json","answer","status","welcome_msg","image_link","history","push","alert","Component","connect","myUserName","myWelcomeMessage","myProfilePhoto","dispatch","setPhone","newPhone","target","payload","setPassword","newPassword","photo","message","createPictureBlob","letter","newPhotoSvg","blob","Blob","createReader","readPhoto","files","Promise","resolve","reader","FileReader","readAsDataURL","onload","Edit","setPhoto","a","closest","setProfilePhoto","pictureUrl","setData","username","toUpperCase","profilePicSvg","htmlFor","src","alt","accept","onChange","hidden","ChatMenu","display","groupId","margin","style","marginTop","DialogItem","timer","touchend","clearTimeout","touchstart","setTimeout","setState","handleClick","onHistoryPush","bind","document","getElementById","addEventListener","dialog","pathname","time","toString","split","onClick","onTouchStart","onTouchEnd","onMouseDown","onMouseUp","withRouter","Header","onSearch","dialogs","onSettings","useState","inputVisible","setVisibility","groupName","onInput","dialogsFound","forEach","dialogGroup","toLowerCase","includes","onBlur","autoFocus","AddContact","resultHidden","defaultValue","loading","changePlaceholderFocus","changePlaceholderBlur","changePhone","length","slice","addContact","user2_id","undefined","dialog_id","onFocus","renderResult","renderLinks","to","SettingPage","clearState","pencilImg","SwiperCore","use","Pagination","Dialogs","slideGroup","itemsFound","slideSettings","querySelector","swiper","slideTo","slideChanged","activeIndex","renderSearchItems","getMockedData","initialSlide","onSlideChange","slot","RenderDialog","toSearchIn","map","WebSocket","window","location","host","onopen","MsgForm","input","msgInput","current","handleSubmit","event","trimmedMsg","savedMsg","trim","editMode","updateMessage","addNewMessage","displayEmojis","setDisplayEmojis","disableAutoFocus","onEmojiClick","emojiObject","cursorPosition","selectionStart","selectionLength","selectionEnd","textArray","splice","emoji","newText","join","setSavedMsg","focus","icon","faSmile","ref","autoComplete","onKeyDown","keyCode","lastMessageIndex","testIndex","currentMessages","direction","blur","enterEditMode","faPaperPlane","Message","formatTime","index","editIndex","edit","ChatWindow","currentFriend","messages","messageList","useRef","useEffect","scroll","top","scrollHeight","updateSaved","setEditMode","dotsClicked","dotsClick","useHistory","xmlns","width","height","viewBox","fill","d","ChatApp","useLocation","currentConv","setEditIndex","Date","toLocaleString","saved","newMessage","selectedConv","console","log","updatedData","msg","savedMessage","Contacts","getDialogData","swipePrev","RenderContact","InviteFriend","Cinema","link","changeLink","title","frameBorder","allow","allowFullScreen","TestWebSocket","socket","App","exact","path","component","render","match","params","dialogId","initialState","myPassword","myPhone","reducer","action","store","createStore","ReactDOM"],"mappings":"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","file":"static/js/main.89fea782.chunk.js","sourcesContent":["export default class SabygramService {\r\n    dialogData = [\r\n        [\r\n            {\r\n                id: 0,\r\n                name: \"Анжелина\",\r\n                lastMessage: \"Как ты?\",\r\n                img: \"https://bugaga.ru/uploads/posts/2016-12/1481556556_kot-volshebnik-1.jpg\",\r\n                timing: \"15 м\"\r\n            },\r\n            {\r\n                id: 1,\r\n                name: \"Крис\",\r\n                lastMessage: \"Встала сегодня в 6 утра прикинь...\",\r\n                img: \"https://yt3.ggpht.com/a/AATXAJynSQVjxLr742pi_eZXJxyzjfWLaRcCxgYaeJX_Cg=s900-c-k-c0xffffffff-no-rj-mo\",\r\n                timing: \"1 ч\"\r\n            }\r\n\r\n        ],\r\n        [\r\n\r\n            {\r\n                id: 2,\r\n                name: \"Сергей\",\r\n                lastMessage: \"Не забывайте подписывать время в тасках\",\r\n                img: \"https://i02.fotocdn.net/s110/defbcd4b451a9263/gallery_xl/2460844912.jpg\",\r\n                timing: \"2 ч\"\r\n            },\r\n            {\r\n                id: 3,\r\n                name: \"Эдуард\",\r\n                lastMessage: \"Пароль не подошел\",\r\n                img: \"https://pm1.narvii.com/7357/dd8ddd1a25b83dcf20d7036a4656fc47b7aad917r1-1080-1198v2_hq.jpg\",\r\n                timing: \"1 д\"\r\n            },\r\n            {\r\n                id: 7,\r\n                name: \"Серёжа\",\r\n                lastMessage: \"Привет, у меня вопрос\",\r\n                img: \"https://i0.wp.com/prostolike.net/wp-content/uploads/2018/08/image3_700x669.jpg?w=700&ssl=1\",\r\n                timing: \"2 д\"\r\n            }\r\n        ],\r\n        [\r\n            {\r\n                id: 4,\r\n                name: \"Вова\",\r\n                lastMessage: \"Выучил реакт за час\",\r\n                img: \"https://cutewallpaper.org/21/grumpy-cat-screensaver/Grumpy-Wallpapers-Wallpaper-Cave.jpg\",\r\n                timing: \"2 ч\"\r\n            },\r\n            {\r\n                id: 5,\r\n                name: \"Саша\",\r\n                lastMessage: \"Я на 2 этаже куда идти?\",\r\n                img: \"https://ustaliy.ru/wp-content/uploads/2019/03/universe.jpg\",\r\n                timing: \"1 н\"\r\n            },\r\n            {\r\n                id: 6,\r\n                name: \"Лёша\",\r\n                lastMessage: \"Я в столовой, если что\",\r\n                img: \"https://avatars.mds.yandex.net/get-zen_doc/1886729/pub_5d62dba6998ed600ad85c10e_5d62dbc135c8d800adef2383/scale_1200\",\r\n                timing: \"2 н\"\r\n            }\r\n\r\n        ]\r\n    ];\r\n    getMockedData(){\r\n        return this.dialogData;\r\n    }\r\n    sendDataPost(data, url) {\r\n        // return new Promise((resolve) => {\r\n        //     setTimeout(() => resolve(\r\n        //         {\r\n        //             status: 1,\r\n        //             name: \"antony\",\r\n        //             image_link:\"https://i0.wp.com/prostolike.net/wp-content/uploads/2018/08/image3_700x669.jpg?w=700&ssl=1\"\r\n        //         }\r\n        //     ), 500)\r\n        // })\r\n        return fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n    }\r\n    sendDataGet(data, url) {\r\n        \r\n        // return fetch(url, {\r\n        //     method: 'GET',\r\n        //     headers: {\r\n        //         'Content-Type': 'application/json;charset=utf-8'\r\n        //     },\r\n        //     body: JSON.stringify(data)\r\n        // })\r\n    }\r\n    getDialogData() {\r\n        // return new Promise((resolve) => {\r\n        //     setTimeout(() => resolve([]), 500)\r\n        // })\r\n        return fetch('http://185.93.109.221:8000/dialogs')\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport SabygramService from \"../../../services/SabygramService\";\r\n\r\nimport './auth.scss';\r\n\r\nclass Auth extends Component {\r\n    service = new SabygramService();\r\n\r\n    state = {\r\n        phone: '', \r\n        password: ''\r\n    }\r\n\r\n    renderAuthPage = () => {\r\n        \r\n        return (\r\n            <section className='login-container'>\r\n                <h1 className='login-text'>вход</h1>\r\n                <form className='login-form' onSubmit={this.sendForm}>\r\n                    <div className='tel-wrapper'>\r\n                        <p className=\"number-7\">+7</p>\r\n                        <input type=\"tel\" name=\"phoneNumber\" placeholder='Тел. номер' maxLength=\"10\" pattern=\"\\d*\" required></input>\r\n                    </div>\r\n                    <input type=\"password\" name=\"password\" placeholder='Пароль' maxLength=\"12\" required></input>\r\n                    <button type=\"submit\" className='login-button'><i className=\"fas fa-play\" ></i></button>\r\n                </form>\r\n            </section>\r\n        )\r\n    }\r\n    sendForm = (e) => {\r\n        e.preventDefault();\r\n        const form = e.currentTarget;\r\n        const {setProlifePhoto, setUserName, setWelcomeMessage} = this.props;\r\n        let userInfo = {\r\n            phone: form.phoneNumber.value,\r\n            password: form.password.value\r\n        };\r\n        this.service.sendDataPost(userInfo, '')\r\n        .then((result) => result.json())\r\n        .then((answer) => {\r\n            if(answer.status === 0){\r\n                setUserName(answer.name)\r\n                setWelcomeMessage(answer.welcome_msg)\r\n                setProlifePhoto(answer.image_link)\r\n                const { history } = this.props;\r\n                history.push('/dialogs');\r\n            }\r\n            if(answer.status === 1) {\r\n                alert(\"Password is incorrect!\")\r\n            }\r\n            if(answer.status === 2) {\r\n                const { history } = this.props;\r\n                history.push('/edit');\r\n            }\r\n        })\r\n        \r\n    }\r\n\r\n    render() {\r\n        return(\r\n            this.renderAuthPage()\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = ({ myUserName, myWelcomeMessage, myProfilePhoto }) => {\r\n    return { \r\n        myUserName, myWelcomeMessage, myProfilePhoto \r\n    }\r\n}\r\n\r\nconst mapDispatchProps = (dispatch) => {\r\n    return {\r\n        setPhone: (e) => {\r\n            const newPhone = e.target.value;\r\n            dispatch({ type: \"SET_MY_PASSWORD\", payload: newPhone })\r\n        },\r\n        setPassword: (e) => {\r\n            const newPassword = e.target.value;\r\n            dispatch({ type: \"SET_MY_PHONE\", payload: newPassword })\r\n        },\r\n        setProlifePhoto: (photo) => {\r\n            dispatch({ type: \"SET_MY_PROFILE_PHOTO\", payload: photo })\r\n        },\r\n        setUserName: (name) => {\r\n            dispatch({ type: \"SET_MY_USER_NAME\", payload: name })\r\n        },\r\n        setWelcomeMessage: (message) => {\r\n            dispatch({ type: \"SET_MY_WELCOME_MESSAGE\", payload: message })\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Auth);\r\n","const createPictureBlob = (letter) => {\r\n    const newPhotoSvg = \r\n      `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"74\" height=\"74\" version=\"1.1\">\r\n      <circle cx=\"37\" cy=\"37\" r=\"37\" fill=\"white\"></circle>\r\n    <text x=\"18\" y=\"60\" font-size=\"60\" font-family=\"Roboto, sans-serif\" fill=\"#738DED\">${letter}\r\n          </text>  \r\n    </svg>`\r\n    const blob= new Blob([newPhotoSvg], {type: 'image/svg+xml'}); \r\n    return createReader(blob);\r\n}\r\n\r\nconst readPhoto = (e) => {\r\n    return createReader(e.target.files[0])\r\n}\r\n\r\nconst createReader = (value) => {\r\n    return new Promise((resolve) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(value);\r\n        reader.onload = () => {\r\n            resolve(reader.result)\r\n        }\r\n    })\r\n}\r\nexport{\r\n    createPictureBlob, readPhoto\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { createPictureBlob, readPhoto } from '../../helpers';\r\nimport SabygramService from \"../../../services/SabygramService\";\r\nimport './edit.scss';\r\n\r\nclass Edit extends Component {\r\n  service = new SabygramService();\r\n\r\n  setPhoto = async (e) => {\r\n    const form = e.currentTarget.closest(\"form\");\r\n    const photo = await readPhoto(e);\r\n    this.props.setProfilePhoto(await photo);\r\n    form.pictureUrl.value = await photo\r\n  }\r\n\r\n  setData = async (e) => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    \r\n    if(!this.props.photo) {\r\n      var profilePicSvg = await createPictureBlob(form.username.value[0].toUpperCase());\r\n      form.pictureUrl.value = await profilePicSvg;\r\n    }\r\n\r\n    let userInfo = {\r\n      name: form.username.value,\r\n      welcome_msg: form.message.value || \"Привет всем друзьям!\",\r\n      image_link: form.pictureUrl.value || profilePicSvg\r\n    }\r\n\r\n    this.service.sendDataPost(userInfo, '/edit')\r\n\r\n    this.props.setUserName(userInfo.name);\r\n    this.props.setWelcomeMessage(userInfo.welcome_msg);\r\n    this.props.setProfilePhoto(userInfo.image_link);\r\n\r\n    const { history } = this.props;\r\n    history.push('/dialogs');\r\n  }\r\n\r\n  render() {\r\n    const { photo } = this.props;\r\n\r\n    return (\r\n      <section className='edit-container'>\r\n        <form className='name-form' id=\"editForm\" onSubmit={this.setData}>\r\n          <label htmlFor=\"picture\" id=\"upload-background\" className=\"upload-background\">\r\n\r\n            {photo ? <img src={photo} alt=\"Profile icon\" className=\"profile-photo\"></img> : <div className=\"plus\">+</div>}\r\n            <input type=\"file\" id=\"picture\" accept=\"image/*\" onChange={this.setPhoto}/>\r\n          </label>\r\n\r\n          <input type=\"text\" name=\"pictureUrl\" hidden /> \r\n          \r\n          <p className='photo-label'>Фото</p>\r\n\r\n          <input type=\"text\" name=\"username\" placeholder='Ваше имя' maxLength=\"25\" required />\r\n\r\n          <input type=\"text\" name=\"message\" placeholder='Привет всем друзьям!' maxLength=\"200\" />\r\n\r\n          <button type=\"submit\" className='edit-button' ><i className=\"fas fa-play\"></i></button>\r\n\r\n        </form>\r\n      </section>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ myProfilePhoto, myWelcomeMessage, myUserName }) => {\r\n  return {\r\n    name: myUserName,\r\n    message: myWelcomeMessage,\r\n    photo: myProfilePhoto\r\n  }\r\n}\r\n\r\nconst mapDispatchProps = (dispatch) => {\r\n  return {\r\n    setProfilePhoto: (photo) => dispatch({ type: \"SET_MY_PROFILE_PHOTO\", payload: photo }),\r\n    setUserName: (name) => dispatch({ type: \"SET_MY_USER_NAME\", payload: name }),\r\n    setWelcomeMessage: (message) => dispatch({ type: \"SET_MY_WELCOME_MESSAGE\", payload: message }),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Edit)\r\n\r\n","import React from 'react';\r\nimport './chatMenu.scss';\r\n\r\nconst ChatMenu = ({ display, groupId, id, margin }) => {\r\n\r\n  if (display === \"block\") {\r\n    switch (groupId) {\r\n      case 0:\r\n        {\r\n          return (\r\n            <ul className='settings' style={{display: `${display}`, marginTop:`${margin}`}}>\r\n              <li>Сделать тихим</li><li>Сделать гроким</li><li>Удалить</li>\r\n            </ul>\r\n          )\r\n        }\r\n      case 1:\r\n        {\r\n          return (\r\n            <ul className='settings' style={{display: `${display}`, marginTop:`${margin}`}}>\r\n              <li>Сделать общим</li><li>Сделать тихим</li><li>Удалить</li>\r\n            </ul>\r\n          )\r\n        }\r\n      case 2:\r\n        {\r\n          return (\r\n            <ul className='settings' style={{display: `${display}`, marginTop:`${margin}`}}>\r\n              <li>Сделать общим</li><li>Сделать гроким</li><li>Удалить</li>\r\n            </ul>\r\n          )\r\n        }\r\n\r\n      default: return (<div>ups...</div>)\r\n    }\r\n  }\r\n  return (\r\n    <p></p>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nexport default ChatMenu;","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport './dialogItem.scss';\r\nimport ChatMenu from '../chatMenu/chatMenu';\r\n\r\nclass DialogItem extends Component {\r\n    state = {\r\n        display: \"none\"\r\n    }\r\n\r\n    timer = null\r\n\r\n    componentDidMount(){\r\n        document.getElementById('root').addEventListener('click', () => {\r\n            this.setState({\r\n                display: \"none\"\r\n            })\r\n          })\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onHistoryPush = this.onHistoryPush.bind(this);\r\n    }\r\n\r\n    touchend = () => {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n            this.timer = null\r\n        }\r\n    }\r\n\r\n    touchstart = () => {\r\n        if (!this.timer) {\r\n            this.timer = setTimeout(() => {\r\n                this.setState({\r\n                    display: \"block\"\r\n                })\r\n                \r\n            }, 500);\r\n        }\r\n    };\r\n    onHistoryPush() {\r\n        const { dialog: { name, img, id }, groupId } = this.props\r\n        this.props.history.push({\r\n            pathname: `/chatapp/${id}`,\r\n            state: {\r\n                id: id,\r\n                name: name,\r\n                img: img,\r\n                groupId: groupId\r\n            }\r\n        }\r\n        );\r\n    }\r\n\r\n    handleClick = () => {\r\n        this.onHistoryPush();\r\n\r\n    };\r\n    render() {\r\n        const { dialog: { name, lastMessage, img, id, timing }, groupId } = this.props\r\n        let time = timing\r\n        time = timing.toString().split(' ')[1].split(':')[0] + ':' + timing.toString().split(' ')[1].split(':')[1]\r\n        \r\n        return (\r\n            <div className=\"dialog\" onClick={this.handleClick} onTouchStart={this.touchstart} onTouchEnd={this.touchend} onMouseDown={this.touchstart} onMouseUp={this.touchend}>\r\n                <img src={img} alt=\"dialogPicture\" className=\"dialog-img\" />\r\n                <div className=\"dialog-contain\">\r\n                    <p className=\"dialog-name\">{name}</p>\r\n                    <p className=\"dialog-message\">{lastMessage}</p>\r\n                </div>\r\n                <div className=\"dialog-timing\">{time}</div>\r\n                <ChatMenu groupId={groupId} display={this.state.display} id={id} margin={\"55px\"}/>\r\n\r\n            </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\nexport default withRouter(DialogItem);","import Header from './header';\r\nexport default Header;","import React, { useState } from 'react';\r\nimport './header.scss';\r\n\r\nconst Header = ({ groupId, onSearch, dialogs, onSettings }) => {\r\n    const [inputVisible, setVisibility] = useState(false);\r\n\r\n    let groupName = null;\r\n\r\n    switch (groupId) {\r\n        case 0:\r\n            groupName = \"Общие\";\r\n            break;\r\n        case 1:\r\n            groupName = \"Громкие\";\r\n            break;\r\n        case 2:\r\n            groupName = \"Тихие\";\r\n            break;\r\n        case \"all\":\r\n            groupName = \"Контакты\";\r\n            break;\r\n        default:\r\n            groupName = null;\r\n    }\r\n\r\n    const handleSearch = () => {\r\n        inputVisible === false ? setVisibility(true) : setVisibility(false)\r\n    }\r\n\r\n    const searchDialogs = (e) => {\r\n        let dialogsFound = [];\r\n\r\n        if(groupId === \"all\"){\r\n            dialogs.forEach((dialogGroup) => {\r\n                dialogGroup.forEach((dialog) => {\r\n                    if (dialog.name.toLowerCase().includes(e.target.value.toLowerCase()))\r\n                    dialogsFound.push(dialog)\r\n                    })\r\n                })\r\n            }\r\n        else {\r\n            dialogs[groupId].forEach((dialog) => {\r\n            if (dialog.name.toLowerCase().includes(e.target.value.toLowerCase()))\r\n                dialogsFound.push(dialog)\r\n            })\r\n        }\r\n        onSearch(dialogsFound)\r\n    }\r\n\r\n    const clearDialogs = (e) => {\r\n        onSearch(null);\r\n        setVisibility(false);\r\n        e.target.value = null\r\n    }\r\n\r\n    return (\r\n        <header className=\"dialogs-header\">\r\n            {groupName && <i className=\"fa fa-bars\" aria-hidden=\"true\" onClick={onSettings}></i>}\r\n            {groupName && <i className=\"fa fa-users\" aria-hidden=\"true\"></i>}\r\n            <div className=\"group-name\">{ groupName }</div>\r\n            <input type=\"text\" className=\"dialogs-search\" onInput={searchDialogs} onBlur={clearDialogs} hidden={!inputVisible} autoFocus={true}></input>\r\n            {groupName &&  <i className=\"fa fa-search\" aria-hidden=\"true\" onClick={handleSearch}></i> }\r\n        </header>\r\n    )\r\n}\r\nexport default Header;","import React, { Component } from 'react';\r\nimport SabygramService from '../../services/SabygramService';\r\nimport './addContact.scss';\r\n\r\nexport default class AddContact extends Component {\r\nservice = new SabygramService();\r\n  state = {\r\n    placeholder: 'Добавить контакт',\r\n    resultHidden: true,\r\n    defaultValue: null,\r\n    result: {},\r\n    loading: false\r\n  }\r\n\r\n  changePlaceholderFocus = () => {\r\n    this.setState({\r\n      placeholder: 'Номер телефона',\r\n      defaultValue: \"+7\"\r\n    })\r\n  }\r\n\r\n  changePlaceholderBlur = () => {\r\n    this.setState({\r\n      placeholder: 'Добавить контакт',\r\n      defaultValue: null\r\n    })\r\n  }\r\n\r\n  changePhone = (e) => {\r\n    if(e.target.value.length === 12){\r\n      this.setState({\r\n        loading: true\r\n      })\r\n      this.service.sendDataPost({status: 1, phone: e.target.value.slice(2)}, '/contacts')\r\n      .then((result) => result.json())\r\n      .then((result) => {\r\n        this.setState({\r\n          result,\r\n          resultHidden: false,\r\n          loading: false\r\n        })   \r\n      })\r\n    }   \r\n  }\r\n  addContact = (e) => {\r\n    this.service.sendDataPost({status: 2, user2_id: this.state.result.id}, '/contacts')\r\n    .then((result) => result.json())\r\n    .then((result) => {\r\n      if(result.dialog_id !== undefined){\r\n        alert(\"Пользователь добавлен в список контактов!\")\r\n      }\r\n    })\r\n  }\r\n  renderResult() {\r\n    if(this.state.result.status === 1){\r\n      return (\r\n        <>\r\n          <img src={this.state.result.image_link} alt=\"avatar\"></img>\r\n            <span>{this.state.result.name}</span>\r\n            <i className=\"fa fa-plus-circle\" aria-hidden=\"true\" onClick={this.addContact}></i>\r\n        </>\r\n      )\r\n    }\r\n    if(this.state.result.status === 0) {\r\n      return (\r\n        <p>Не найдено</p>\r\n      )\r\n    }\r\n    if(this.state.loading) {\r\n      return (\r\n        <p>Идёт поиск...</p>\r\n      )\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <form className='add-contact-form'>\r\n        <input type=\"tel\" className='add-contact' placeholder={this.state.placeholder} onFocus={this.changePlaceholderFocus} onBlur={this.changePlaceholderBlur} onChange={this.changePhone} maxLength=\"12\" defaultValue={this.state.defaultValue}/>        \r\n          <div className='add-contact-result-container' hidden={this.state.resultHidden}>\r\n            <div className=\"add-contact-result\">\r\n              {this.renderResult()}\r\n            </div>   \r\n          </div>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACySURBVHgB7ZOhDsJADECvBIXeNBo+AjQWPoKvmIIEjSMBh95HgMZjmZ8Fe7xmXZiCa4Jck5fbenm9XtKT4IgY44xlZb8bEaldMpwgt+89ZJIq28kvuHFyabnF0CFv4QkFOd26hM91vratread3Ah2cLTi6bLlM8v38j/lcTthbpkYwCQ0A7LsyiwFlEzd9VeBKZyhRlx7ZA0d5bb1CrTdORxSZA3Re4bmkTysSIV8D4nxBulz6F4h5s8kAAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { readPhoto } from '../../helpers';\r\nimport { Link } from 'react-router-dom';\r\nimport SabygramService from \"../../../services/SabygramService\";\r\nimport './settingPage.scss';\r\n\r\n\r\nimport contactsImg from '../../../img/1.png';\r\nimport cinemaImg from '../../../img/2.png';\r\nimport pencilImg from '../../../img/3.png';\r\nconst service = new SabygramService();\r\n\r\nconst SettingPage = ({ myUserName, myWelcomeMessage, myProfilePhoto, setProfilePhoto, setUserName, setWelcomeMessage, clearState }) => {\r\n    // const userName = data[0];\r\n    // const greetMessage = data[1];\r\n    // const pictureUrl = data[3];\r\n\r\n    // alert(\"data\" + data)\r\n    // alert(\" data[0]\" + data[0])\r\n    // alert(\"{data}\" + {data})\r\n    // alert(\"{data}[0]\" + {data}[0])\r\n\r\n    const setPhoto = async (e) => {\r\n        const form = e.currentTarget.closest(\"form\");\r\n        const photo = await readPhoto(e);\r\n        setProfilePhoto(await photo);\r\n        form.pictureUrl.value = await photo\r\n    }\r\n\r\n    const setData = async (e) => {\r\n        e.preventDefault();\r\n        const form = e.currentTarget;\r\n\r\n        let userInfo = {\r\n            name: form.username.value,\r\n            welcome_msg: form.message.value,\r\n            image_link: form.pictureUrl.value\r\n        }\r\n\r\n        service.sendDataPost(userInfo, '/edit')\r\n\r\n        setUserName(userInfo.name);\r\n        setWelcomeMessage(userInfo.welcome_msg);\r\n        //this.props.setProfilePhoto(userInfo.image_link);   \r\n    }\r\n\r\n    const renderForm = () => {\r\n        return (\r\n            <>\r\n                <form name=\"profileInfo\" className=\"profileInfo\" onSubmit={setData}>\r\n                    <label htmlFor=\"picture\" id=\"upload-background\" className=\"upload-background-profile\">\r\n                        <img src={myProfilePhoto} alt=\"Profile icon\" className=\"photo-settings\" />\r\n                        <input className=\"profile-photo-settings\" type=\"file\" id=\"picture\" accept=\"image/*\" onChange={setPhoto} />\r\n                    </label>\r\n                    <input type=\"text\" name=\"pictureUrl\" hidden></input>\r\n\r\n                    <label>\r\n                        <input type=\"text\" className=\"username-field\" name=\"username\" defaultValue={myUserName} maxLength=\"25\" />\r\n                        <img src={pencilImg} alt=\"edit\" className=\"settings-pencil\"></img>\r\n                    </label>\r\n                    <label>\r\n                        <input type=\"text\" className=\"message-field\" name=\"message\" defaultValue={myWelcomeMessage} maxLength=\"200\" />\r\n                        <img src={pencilImg} alt=\"edit\" className=\"settings-pencil\"></img>\r\n                    </label>\r\n                    <button type=\"submit\" className=\"profileInfo-button\">Сохранить</button>\r\n                    <Link to=\"/\" className=\"profileInfo-button exit-button\" onClick={clearState}>Выйти</Link>\r\n\r\n                </form>\r\n                <span className=\"saby-gramm\">SABYgramm ©</span>\r\n            </>\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"setting-page\">\r\n            {renderLinks()}\r\n            {renderForm()}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst renderLinks = () => {\r\n    return (\r\n        <div className=\"link-controllers \">\r\n            <Link to=\"/contacts\" className=\"left-controller\">\r\n                <div className=\"link-contain\">\r\n                    <div className=\"icon\">\r\n                        <img src={contactsImg} alt=\"Контакты\" />\r\n                    </div>\r\n                    <p>Контакты</p>\r\n                </div>\r\n            </Link>\r\n            <Link to=\"/cinema\">\r\n                <div className=\"link-contain\">\r\n                    <div className=\"icon\">\r\n                        <img src={cinemaImg} alt=\"Кинотеатр\" />\r\n                    </div>\r\n                    <p>Кинотеатр</p>\r\n                </div>\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ myUserName, myWelcomeMessage, myProfilePhoto }) => {\r\n    return {\r\n        // data: ownProps.data,\r\n        myUserName,\r\n        myWelcomeMessage,\r\n        myProfilePhoto\r\n    }\r\n}\r\n\r\nconst mapDispatchProps = (dispatch) => {\r\n    return {\r\n        setProfilePhoto: (photo) => dispatch({ type: \"SET_MY_PROFILE_PHOTO\", payload: photo }),\r\n        setUserName: (name) => dispatch({ type: \"SET_MY_USER_NAME\", payload: name }),\r\n        setWelcomeMessage: (message) => dispatch({ type: \"SET_MY_WELCOME_MESSAGE\", payload: message }),\r\n        clearState: () => dispatch({ type: \"CLEAR_STATE\" })\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchProps)(SettingPage);","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO6SURBVHgB1Vn9ddMwEL/k8T9hgqoTNJ0AMwHZgGyQbJB0AsIEoRMAEzhMkDKBnQlcJhBWclfLsj7ubKfA7z1Xrk6n+9JJZwXgCtBar+on1xdU+K7gf0Ct6F6HsYbXRC0wQ+9VqIB5X0bGb3Bcgbwz4/n62VpGzMeSl1J+E/HkJsBTIH3hoe2QthtLXkz5pcW8RU+aZ231Zw6Pwv4qMGeG9OMY8lIG5Mi09tBoOeQBAwqIG5CPIS9lAGHmoc1CntbN2s08tD3S9mPJixlQMSbUHhp5q9CYfDj+s6WkGktezIAcebYe2ioW0rr/qw5jPba8kAGZLVQ3SbWx+pcRfpOURxxHB1l2LXmhSbc6jC2MjKvIQ0/mXE8OxWvLc4VTyKuIJwt92Y0U/EvQlzOg0HwUVzPC8mSRUGBu8dDYo47XOnPdJHdh9a8Y8vZJo4WeXCLPwhIyA56DCuRZYN83nshE5HTbk1nMUOudijR2qaybGmdP82l+5PLQoEziSYsvR75MwENR+y7gMZHrlCpTawx54MdkMnkGPhS2Ep4nbO+4DKjTI/77Eq2pR5ESZFAo4InLUI8tiVcSbWh0U9RhG3DjDErCWrds5T3KvAU+KMqKOnwRkCyFWQ8eAhl9z2d54SFnew2QeJMi8AvkODlyOShdnrMBuA7N89wzgUuQo3TmSAJ1M8+Mcmc6UBHaRYbkgAIZWnngGiBdy2PkAHsrdfiU+eMaIF3L5xyQbKEWOjsKE63cGbqEzkrofpdPi54yS2yV+UMGiM8AxAO2e2ktZHjw30eQwZsDhPcgQL10dnVD9YzkRFXYmrJlCzJ0Dz7d/qg+F3TAxMBijn3ToLtl/tIdsHYGsTxqVYgKmNCJa8gAD6GKLlfLiBvGpHOpIhZvJZATvLacRvjeQRoK2z7b6AHbD4yxwfPGZ0DpMMVAtdBPkOPkzBGDyABJkUW71pAIcE5iMuC3S3gDw0DeMx/l1FfWz71bFGKSH6EbWUkEOrkWW0IK0vDVQAqaU9bGHPzLklNHKWxPLmEKA1B7+XZioe76giSfV6nvYdLGLQxALALJ7c2DVqXoYEjprbAtXUKvCOjLDxaF57A7YHvHVQL3+Pjh1JQPom1UQRhzpLeWCt42GCGt2wZ8D5XeZh5D/whh9DoHFPSYMMAfu73wjWfL65vEwW0Nmo8iOzr0foKR5XXOAbMMcE8/1x8QQT3Wp5Dx8idoG6CwPYwtLxSBEtIoE/12Iqd2oBL6yxsXVuXog+Sj5+9B+39jYH8kSfAH59pcMpQFQ70AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,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\"","import SettingPage from './settingPage';\r\n\r\nexport default SettingPage;","import React, { Component } from 'react';\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport SwiperCore, {\r\n    Pagination\r\n} from 'swiper/core';\r\nimport DialogItem from '../../dialogItem/dialogItem';\r\nimport SabygramService from '../../../services/SabygramService';\r\nimport Header from '../../header';\r\nimport './dialogs.scss';\r\nimport AddContact from '../../addContact/addContact';\r\nimport SettingPage from '../settingPage';\r\n\r\nSwiperCore.use([Pagination]);\r\n\r\nexport default class Dialogs extends Component {\r\n    service = new SabygramService();\r\n\r\n    state = {\r\n        slideGroup: 0,\r\n        itemsFound: null,\r\n        dialogs: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.service.getDialogData()\r\n        // .then((dialogs) => dialogs.json())\r\n        // .then((result) => {\r\n        //     this.setState({dialogs:result});\r\n        // }) \r\n\r\n        let result = this.service.getMockedData();\r\n        this.setState({ dialogs: result });\r\n\r\n\r\n    }\r\n\r\n    slideSettings = () => {\r\n        var mySwiper = document.querySelector('.swiper-container').swiper\r\n        mySwiper.slideTo(0);\r\n    }\r\n\r\n    slideChanged = (e) => {\r\n        if (e) {\r\n            this.setState({\r\n                slideGroup: e.activeIndex - 1\r\n            })\r\n        }\r\n    }\r\n\r\n    renderSearchItems = (dialogs) => {\r\n        this.setState({\r\n            itemsFound: dialogs\r\n        })\r\n    }\r\n\r\n    addContact = () => {\r\n        if (this.state.dialogs[0] && this.state.dialogs[0].length === 0) {\r\n            return (<AddContact />)\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n\r\n            <Swiper className=\"mySwiper\" initialSlide=\"1\" onSlideChange={this.slideChanged}>\r\n                <Header slot=\"container-start\" groupId={this.state.slideGroup} onSearch={this.renderSearchItems} dialogs={this.state.dialogs} onSettings={this.slideSettings} />\r\n                <div className=\"dialog-container\">\r\n                    <SwiperSlide>\r\n\r\n                        {/* <SettingPage data={this.state.dialogs[3][0]}/> */}\r\n                        <SettingPage />\r\n                    </SwiperSlide>\r\n\r\n                    <SwiperSlide>\r\n\r\n                        {this.addContact()}\r\n                        <RenderDialog dialogs={this.state.dialogs[0]} itemsFound={this.state.itemsFound} groupId={0} />\r\n                    </SwiperSlide>\r\n\r\n                    <SwiperSlide>\r\n                        {this.addContact()}\r\n                        <RenderDialog dialogs={this.state.dialogs[1]} itemsFound={this.state.itemsFound} groupId={1} />\r\n                    </SwiperSlide>\r\n\r\n\r\n                    <SwiperSlide>\r\n                        {this.addContact()}\r\n                        <RenderDialog dialogs={this.state.dialogs[2]} itemsFound={this.state.itemsFound} groupId={2} />\r\n                    </SwiperSlide>\r\n                </div>\r\n\r\n            </Swiper>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst RenderDialog = ({ dialogs, itemsFound = null, groupId = null }) => {\r\n\r\n    let toSearchIn = null;\r\n\r\n    itemsFound ? toSearchIn = itemsFound : toSearchIn = dialogs;\r\n\r\n    if (dialogs)\r\n        return (\r\n            <div>\r\n                {\r\n                    toSearchIn.map((dialog) => {\r\n                        const socket = new WebSocket(\"ws://\" + window.location.host + `/ws/room/${dialog.id}/`)\r\n                        socket.onopen = function () {\r\n                            alert(\"Соединение установлено. \" + dialog.id);\r\n                        };\r\n\r\n                        return <DialogItem key={dialog.id} dialog={dialog} groupId={groupId} />\r\n                    })\r\n                }\r\n            </div>\r\n        )\r\n    else return <div></div>\r\n}","import React, { useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPaperPlane, faSmile } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Picker from \"emoji-picker-react\";\r\n\r\n/**\r\n * This renders the form to send a new message.\r\n */\r\nconst MsgForm = (props) => {\r\n    const input = props.msgInput.current;\r\n\r\n    /** This functions handles the submission of the new message form */\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        /* We ensure the message is not empty, and trim any extra space\r\n         * before sending */\r\n        let trimmedMsg = props.savedMsg.trim();\r\n\r\n        if (trimmedMsg.length > 0) {\r\n            !props.editMode\r\n                ? props.addNewMessage(trimmedMsg, \"outgoing\")\r\n                : props.updateMessage(trimmedMsg);\r\n        }\r\n        // if (!props.editMode) {\r\n        //     let phrase = \"\";\r\n        //     const generatedPhrase = async () => {\r\n        //         setTimeout(async () => {\r\n        //             const result = await generatePhrase();\r\n        //             phrase = result;\r\n        //             props.addNewMessage(phrase, \"incoming\");\r\n        //         }, 2000);\r\n        //     };\r\n        //     const generatePhrase = () => {\r\n        //         return 'Какой-то текст'\r\n        //     };\r\n        //     generatedPhrase();\r\n        // }\r\n\r\n    };\r\n\r\n    /** Update the saved message when the input changes */\r\n    const handleChange = (event) => {\r\n        props.setSavedMsg(event.currentTarget.value);\r\n    };\r\n\r\n    /** This state defines if the emoji picker is visible or not */\r\n    const [displayEmojis, setDisplayEmojis] = useState(false);\r\n\r\n    /**\r\n     * This function handles displaying or hiding the emoji picker on click\r\n     * @param {onClick} event\r\n     */\r\n    const handleDisplayPicker = (event) => {\r\n        event.preventDefault();\r\n        setDisplayEmojis(!displayEmojis);\r\n    };\r\n\r\n    /** Edit the latest message when up arrow is pressed */\r\n    const handleKeyPress = (event) => {\r\n        if (\r\n            event.keyCode === 38 &&\r\n            props.lastMessageIndex >= 0 &&\r\n            props.editMode === false\r\n        ) {\r\n            // Find the index of the latest outgoing message\r\n            let testIndex = props.lastMessageIndex;\r\n            while (props.currentMessages[testIndex].direction === \"incoming\") {\r\n                testIndex--;\r\n            }\r\n            input.blur();\r\n            setTimeout(() => {\r\n                props.enterEditMode(testIndex);\r\n            }, 0);\r\n        }\r\n    };\r\n    /**\r\n     * Adds an emoji in the string of the input, at the curor's current position\r\n     * Browser focus then returns to the text input and places the cursor after the\r\n     * emoji\r\n     */\r\n    const onEmojiClick = (event, emojiObject) => {\r\n        setDisplayEmojis(false);\r\n        const cursorPosition = input.selectionStart;\r\n        const selectionLength = input.selectionEnd - input.selectionStart;\r\n        const textArray = input.value.split(\"\");\r\n        textArray.splice(cursorPosition, selectionLength, emojiObject.emoji);\r\n        const newText = textArray.join(\"\");\r\n        props.setSavedMsg(newText);\r\n\r\n        input.focus();\r\n        input.selectionStart = input.selectionEnd = cursorPosition + 1;\r\n    };\r\n\r\n    return (\r\n        <form\r\n            className={\r\n                props.editMode ? \"message-form editing-input\" : \"message-form\"\r\n            }\r\n            onSubmit={handleSubmit}\r\n            key={\"MessageForm\"}\r\n        >\r\n            <div className={displayEmojis ? \"emoji-picker\" : \"hidden\"}>\r\n                <Picker disableAutoFocus={true} onEmojiClick={onEmojiClick} />\r\n            </div>\r\n            <button\r\n                type=\"button\"\r\n                className=\"open-emojis\"\r\n                onClick={handleDisplayPicker}\r\n            >\r\n                <FontAwesomeIcon icon={faSmile} />\r\n            </button>\r\n            <input\r\n                id=\"message-input\"\r\n                type=\"text\"\r\n                ref={props.msgInput}\r\n                className=\"message-input\"\r\n                placeholder=\"Message\"\r\n                autoComplete=\"off\"\r\n                onChange={handleChange}\r\n                value={props.savedMsg || \"\"}\r\n                onKeyDown={handleKeyPress}\r\n            />\r\n            <button type=\"submit\" className=\"send-message\">\r\n                <span className=\"sr-only\">send</span>\r\n                <FontAwesomeIcon icon={faPaperPlane} />\r\n            </button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default MsgForm;\r\n","import React from \"react\";\n\nconst Message = (props) => {\n    const handleClick = () => props.enterEditMode(props.index);\n    const formatTime = (time) => {\n        return time.toString().split(' ')[1].split(':')[0] + ':' + time.toString().split(' ')[1].split(':')[1]\n    }\n    return (\n        <>\n            {props.message.direction === \"outgoing\" ? (\n                <div className=\"outgoing\">\n                    <button\n                        className={\n                            props.editMode && props.index === props.editIndex\n                                ? \"message editing\"\n                                : \"message\"\n                        }\n                        onClick={handleClick}\n                    >\n                        {props.message.message}\n                        <p className=\"msg-date\">\n                            {props.message.edit\n                                ? \"ред. \" + formatTime(props.message.edit)\n                                : formatTime(props.message.time)}\n                        </p>\n                    </button>\n\n                </div>\n            ) : (\n                <div className=\"incoming\">\n                    <div className=\"message\">{props.message.message}\n                        <p className=\"msg-date\">\n                            {props.message.edit\n                                ? \"ред. \" + formatTime(props.message.edit)\n                                : formatTime(props.message.time)}\n                        </p></div>\n\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default Message;\n","import React, { useEffect, useRef } from \"react\";\n\nimport MsgForm from \"../msgForm\";\nimport Message from \"../message\";\n\n/**\n * This renders the entire chat window, including the list of messages and the\n * input for new messages.\n */\nconst ChatWindow = (props) => {\n    const currentFriend = props.messages.name;\n    const currentMessages = props.messages.messages;\n    const messageList = useRef(null);\n\n    /**\n     * This effect ensures the pages scrolls to the bottom of the page if the\n     * height of the message list is longer than the height of its container\n     */\n    useEffect(() => {\n        if (messageList) {\n            messageList.current.addEventListener(\"DOMNodeInserted\", (event) => {\n                const { currentTarget: target } = event;\n                target.scroll({ top: target.scrollHeight });\n            });\n        }\n    }, []);\n\n    return (\n        <div className=\"chat-window\">\n            <ul className=\"message-list\" ref={messageList}>\n                {currentMessages.length !== 0\n                    ? currentMessages.map((message, index) => (\n                        <li key={index}>\n                            <Message\n                                message={message}\n                                enterEditMode={props.enterEditMode}\n                                index={index}\n                                editMode={props.editMode}\n                                editIndex={props.editIndex}\n                            />\n                        </li>\n                    ))\n                    : null}\n            </ul>\n\n            {currentMessages.length === 0 ? (\n                <p className=\"no-message\">\n                    This is the beginning of your conversation with{\" \"}\n                    {currentFriend}\n                </p>\n            ) : null}\n\n            <MsgForm\n                addNewMessage={props.addNewMessage}\n                updateSaved={props.updateSaved}\n                setSavedMsg={props.setSavedMsg}\n                savedMsg={props.savedMsg}\n                currentMessages={currentMessages}\n                updateMessage={props.updateMessage}\n                editMode={props.editMode}\n                setEditMode={props.setEditMode}\n                editIndex={props.editIndex}\n                enterEditMode={props.enterEditMode}\n                lastMessageIndex={currentMessages.length - 1}\n                msgInput={props.msgInput}\n            />\n        </div>\n    );\n};\n\nexport default ChatWindow;\n","import Header from './header';\r\nexport default Header;","import React, {useState} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ChatMenu from '../chatMenu/chatMenu';\r\nimport './header.scss';\r\n\r\nconst MsgHeader = ({ groupId, name, img, id }) => {\r\n   const [dotsClicked, dotsClick] = useState(\"none\");\r\n\r\n\r\n    let groupName = null;\r\n    const history = useHistory();\r\n    const handleClick = () => history.push(`/dialogs`);\r\n    const onDotsClick = () => {\r\n        if(dotsClicked ==='block'){\r\n            dotsClick('none')\r\n        }\r\n        else dotsClick('block')\r\n    }\r\n    switch (groupId) {\r\n        case 0:\r\n            groupName = \"Общие\";\r\n            break;\r\n        case 1:\r\n            groupName = \"Громкие\";\r\n            break;\r\n        case 2:\r\n            groupName = \"Тихие\";\r\n            break;\r\n        default:\r\n            groupName = null;\r\n    }\r\n\r\n    return (\r\n        <header className=\"message-header\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"22\" viewBox=\"0 0 32 24\" fill=\"none\" onClick={handleClick}>\r\n                <path d=\"M0.939339 10.9393C0.353552 11.5251 0.353552 12.4749 0.939339 13.0607L10.4853 22.6066C11.0711 23.1924 12.0208 23.1924 12.6066 22.6066C13.1924 22.0208 13.1924 21.0711 12.6066 20.4853L4.12132 12L12.6066 3.51472C13.1924 2.92893 13.1924 1.97919 12.6066 1.3934C12.0208 0.807614 11.0711 0.807613 10.4853 1.3934L0.939339 10.9393ZM32 10.5L2 10.5L2 13.5L32 13.5L32 10.5Z\" fill=\"white\" />\r\n            </svg>\r\n            <img src={img} alt=\"dialogPicture\" className=\"message-dialog-img\" />\r\n            <div className='flex-names'>\r\n                <div className='user-name'>{name}</div>\r\n                <div className=\"group-name\">{groupName}</div>\r\n            </div>\r\n            <i className=\"fas fa-ellipsis-v\" onClick={onDotsClick}></i>\r\n            \r\n            <ChatMenu display={dotsClicked} groupId={groupId} id={id} margin={\"85px\"}/>\r\n        </header>\r\n    )\r\n}\r\nexport default MsgHeader;","import React, { useState, useRef } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport ChatWindow from \"../chatWindow\";\r\nimport './chatApp.scss';\r\nimport MsgHeader from \"../msgHeader\";\r\n//import SabygramService from \"../../services/SabygramService\";\r\n\r\n/**\r\n * The chat application\r\n */\r\nconst ChatApp = () => {\r\n    const location = useLocation();\r\n\r\n    if (location.state) {\r\n        var { groupId, name, img, id } = location.state\r\n    }\r\n    else {\r\n        groupId = 0;\r\n        name = 'Vasya';\r\n        img = 'https://i1.sndcdn.com/artworks-000094489636-qzznk3-t500x500.jpg';\r\n        id = 100;\r\n    }\r\n\r\n\r\n\r\n\r\n    /**\r\n     * The currentConv state determines the conversation currently rendered\r\n     */\r\n    const [currentConv] = useState(\"0\");\r\n    //индекс диалога в группе\r\n\r\n    /** The editMode state defines if a message is being edited or not */\r\n    const [editMode, setEditMode] = useState(false);\r\n\r\n    /** editIndex holds the index of the message currently being edited */\r\n    const [editIndex, setEditIndex] = useState(null);\r\n\r\n    const msgInput = useRef();\r\n    //const service = new SabygramService();\r\n    //const dialogs = service.getDialogData(0);\r\n    //индекс группы\r\n\r\n    /**\r\n     * The data object holds all friends and their related messages\r\n     */\r\n    const [data, setData] = useState({\r\n        0: {\r\n            name: name, messages: [{\r\n                message: \"newMessage\",\r\n                time: new Date().toLocaleString(),\r\n                direction: 'incoming',\r\n            }, {\r\n                message: \"newMessage\",\r\n                time: new Date().toLocaleString(),\r\n                direction: 'outgoing',\r\n            }], saved: \"\", editMode: false, groupId: groupId, img: img\r\n        },\r\n        // 1: { name: name, messages: [{\r\n        //     message: \"newMessage1\",\r\n        //     time: new Date().toLocaleString(),\r\n        //     direction: 'incoming',\r\n        // },{\r\n        //     message: \"newMessage1\",\r\n        //     time: new Date().toLocaleString(),\r\n        //     direction: 'outgoing',\r\n        // }], saved: \"\", editMode: false, groupId: groupId, img: img },\r\n    });\r\n    //поменять индексы и должно работать, но не могу с сервиса забрать в пропс сразу\r\n\r\n    /**\r\n     * The savedMsg state hold the text currently displayed in the message input\r\n     */\r\n    const [savedMsg, setSavedMsg] = useState(\"\");\r\n\r\n    /**\r\n     * Add a message to the current conversation\r\n     * @param {string} newMessage\r\n     * @param {string} direction\r\n     */\r\n    const addNewMessage = (newMessage, direction) => {\r\n        const selectedConv = data[currentConv];\r\n        const time = new Date().toLocaleString();\r\n        selectedConv.messages.push({\r\n            message: newMessage,\r\n            time: time,\r\n            direction: direction,\r\n        });\r\n        console.log(selectedConv.messages)\r\n        const updatedData = { ...data };\r\n        updatedData[currentConv] = selectedConv;\r\n        setData(updatedData);\r\n        setSavedMsg(\"\");\r\n    };\r\n\r\n    /**\r\n     * The following function saves any unsent message to that current conversation\r\n     * object\r\n     * @param {string} msg The saved message\r\n     */\r\n    const updateSaved = (msg) => {\r\n        const selectedConv = data[currentConv];\r\n        selectedConv.saved = msg;\r\n        const updatedData = { ...data };\r\n        updatedData[currentConv] = selectedConv;\r\n        setData(updatedData);\r\n    };\r\n\r\n    /**\r\n     * The following finds the message to be edited, adds this\r\n     * message to the text input and focuses on it.\r\n     * @param {number} index The index of the message to be edited\r\n     */\r\n    const enterEditMode = (index) => {\r\n        const savedMessage = data[currentConv].messages[index].message;\r\n        setEditIndex(index);\r\n        setSavedMsg(savedMessage);\r\n        setEditMode(true);\r\n        msgInput.current.focus();\r\n    };\r\n\r\n    /**\r\n     * This message updates a message and turns off \"edit mode\"\r\n     * @param {string} newMessage The updated message\r\n     */\r\n    const updateMessage = (newMessage) => {\r\n        if (newMessage.trim().length > 0) {\r\n            const selectedConv = data[currentConv];\r\n            const time = new Date().toLocaleString();\r\n            selectedConv.messages[editIndex].message = newMessage;\r\n            selectedConv.messages[editIndex].edit = time;\r\n            const updatedData = { ...data };\r\n            updatedData[currentConv] = selectedConv;\r\n            setData(updatedData);\r\n        }\r\n        setEditMode(false);\r\n        setSavedMsg(\"\");\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <MsgHeader\r\n                groupId={data[currentConv].groupId}\r\n                name={data[currentConv].name}\r\n                img={data[currentConv].img} />\r\n            <div className=\"chat-container\">\r\n                <ChatWindow\r\n                    messages={data[currentConv]}\r\n                    addNewMessage={addNewMessage}\r\n                    updateSaved={updateSaved}\r\n                    setSavedMsg={setSavedMsg}\r\n                    savedMsg={savedMsg}\r\n                    editMode={editMode}\r\n                    setEditMode={setEditMode}\r\n                    editIndex={editIndex}\r\n                    setEditIndex={setEditIndex}\r\n                    updateMessage={updateMessage}\r\n                    msgInput={msgInput}\r\n                    enterEditMode={enterEditMode}\r\n                />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ChatApp;\r\n","import React, {Component} from 'react';\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport Header from '../../header';\r\nimport SettingPage from '../settingPage';\r\nimport SabygramService from '../../../services/SabygramService';\r\nimport AddContact from '../../addContact/addContact';\r\nimport './contacts.scss';\r\n\r\nexport default class Contacts extends Component{\r\n    service = new SabygramService();\r\n\r\n    componentDidMount() {  \r\n        this.service.getDialogData()\r\n        .then((dialogs) => dialogs.json())\r\n        .then((result) => {\r\n            this.setState({dialogs:result});\r\n        }) \r\n    }\r\n\r\n    state = {\r\n        slideGroup: \"all\",\r\n        itemsFound: null,\r\n        dialogs: []\r\n    }\r\n\r\n    slideChanged = (e) => {\r\n        if (e && e.activeIndex === 1) {\r\n            this.setState({\r\n                slideGroup: \"all\"\r\n            })\r\n        }\r\n        else this.setState({\r\n            slideGroup: null\r\n        })\r\n    }\r\n    renderSearchItems = (dialogs) => {\r\n        this.setState({\r\n            itemsFound: dialogs\r\n        })\r\n    }\r\n\r\n    addContact = () => {\r\n        return (<AddContact />)   \r\n    }\r\n\r\n    \r\n    render(){\r\n        return(\r\n            <Swiper className=\"mySwiper\" initialSlide=\"1\" onSlideChange={this.slideChanged}>\r\n                <Header slot=\"container-start\" groupId={this.state.slideGroup} onSettings={this.swipePrev} onSearch={this.renderSearchItems} dialogs={this.state.dialogs}/>\r\n                <SwiperSlide>\r\n                    <SettingPage />\r\n                </SwiperSlide>\r\n    \r\n                <SwiperSlide>\r\n                    {this.addContact()}\r\n                    <RenderContact dialogs={this.state.dialogs} itemsFound={this.state.itemsFound}/>\r\n                </SwiperSlide>\r\n            </Swiper>\r\n        )\r\n    }\r\n    \r\n}\r\nconst RenderContact = ({dialogs, itemsFound = null }) => {\r\n    let toSearchIn = null;\r\n    if(dialogs.length !== 0)  itemsFound ? toSearchIn = itemsFound : toSearchIn = [...dialogs[0], ...dialogs[1], ...dialogs[2]];\r\n\r\n    if(toSearchIn)\r\n        return(\r\n        <div className=\"dialog-container\">{ \r\n            toSearchIn.map((dialog) => {\r\n                return <div key={dialog.id} className=\"contact\">\r\n                    <img src={dialog.img} alt=\"dialogPicture\" className=\"contacts-img\" />\r\n                    {dialog.name}</div>\r\n            })\r\n        }\r\n        </div>\r\n    )\r\n    else return <div></div>\r\n}\r\n","import React, { Component } from 'react';\r\nimport SabygramService from '../../services/SabygramService';\r\nimport './inviteFriend.scss';\r\n\r\nexport default class InviteFriend extends Component {\r\n\r\n  service = new SabygramService();\r\n  state = {\r\n    placeholder: 'Пригласить',\r\n    resultHidden: true,\r\n    defaultValue: null,\r\n    result: {},\r\n    loading: true\r\n  }\r\n\r\n\r\n  changePlaceholderFocus = () => {\r\n    this.setState({\r\n      placeholder: 'Имя',\r\n      defaultValue: \"\"\r\n    })\r\n  }\r\n\r\n  changePlaceholderBlur = () => {\r\n    this.setState({\r\n      placeholder: 'Пригласить',\r\n      defaultValue: null\r\n    })\r\n  }\r\n\r\n  changePhone = (e) => {\r\n    if (e.target.value.length === 12) {\r\n      this.setState({\r\n        loading: true\r\n      })\r\n      this.service.sendDataPost({ status: 1, phone: e.target.value.slice(2) }, '/contacts')\r\n        .then((result) => result.json())\r\n        .then((result) => {\r\n          this.setState({\r\n            result,\r\n            resultHidden: false,\r\n            loading: false\r\n          })\r\n        })\r\n    }\r\n  }\r\n  addContact = (e) => {\r\n    this.service.sendDataPost({ status: 2, user2_id: this.state.result.id }, '/contacts')\r\n      .then((result) => result.json())\r\n      .then((result) => {\r\n        if (result.dialog_id !== undefined) {\r\n          alert(\"Пользователь добавлен в список контактов!\")\r\n        }\r\n      })\r\n  }\r\n  renderResult() {\r\n    if (this.state.result.status === 1) {\r\n      return (\r\n        <>\r\n          <img src={this.state.result.image_link} alt=\"avatar\"></img>\r\n          <span>{this.state.result.name}</span>\r\n          <i className=\"fa fa-plus-circle\" aria-hidden=\"true\" onClick={this.addContact}></i>\r\n        </>\r\n      )\r\n    }\r\n    if (this.state.result.status === 0) {\r\n      return (\r\n        <p>Не найдено</p>\r\n      )\r\n    }\r\n    if (this.state.loading) {\r\n      return (\r\n        <p>Идёт поиск...</p>\r\n      )\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <form className='add-friend-form' >\r\n        <input type=\"tel\" className='add-friend' placeholder={this.state.placeholder} onFocus={this.changePlaceholderFocus} onBlur={this.changePlaceholderBlur} onChange={this.changePhone} maxLength=\"12\" defaultValue={this.state.defaultValue} />\r\n        <div className='add-friend-result-container' hidden={this.state.resultHidden}>\r\n          <div className=\"add-friend-result\">\r\n            {this.renderResult()}\r\n          </div>\r\n        </div>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ChatApp from '../../chatApp';\r\nimport InviteFriend from '../../inviteFriend/inviteFriend';\r\nimport './cinema.scss'\r\n\r\nexport default class Cinema extends Component {\r\n  state = {\r\n    link: 'https://www.youtube.com/embed/dQw4w9WgXcQ',\r\n\r\n  }\r\n  changeLink = (e) => {\r\n    this.setState({\r\n      link: `${e.target.value}`\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className='cinema-page'>\r\n        <iframe title='movie' className=\"movie\" src={this.state.link} frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>\r\n        <div className='blue-div-link'>\r\n\r\n          <input className='link' value=\"https://www.youtube.com/embed/dQw4w9WgXcQ\" placeholder='https://www.youtube.com/embed/dQw4w9WgXcQ' onChange={this.changeLink} />\r\n          <InviteFriend />\r\n          <ChatApp />\r\n        </div>\r\n      </div>\r\n\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport './test.scss';\r\n\r\nconst TestWebSocket = ({socket}) => {\r\n  return (<div>Test</div>)\r\n    socket = new WebSocket(\"ws://\" + window.location.host + \"/ws/room/1/\")\r\n    socket.onopen = function() {\r\n        alert(\"Соединение установлено.\");\r\n      };\r\n      \r\n      socket.onclose = function(event) {\r\n        if (event.wasClean) {\r\n          alert('Соединение закрыто чисто');\r\n        } else {\r\n          alert('Обрыв соединения'); // например, \"убит\" процесс сервера\r\n        }\r\n        alert('Код: ' + event.code + ' причина: ' + event.reason);\r\n      };\r\n      \r\n      socket.onmessage = function(event) {\r\n        alert(\"Получены данные \" + event.data);\r\n      };\r\n      \r\n      socket.onerror = function(error) {\r\n        alert(\"Ошибка \" + error.message);\r\n      };\r\n\r\n    //   socket.send(JSON.stringify({'message': '123', 'username': 'vasa'}))\r\n\r\n\r\n\r\n\r\n\r\n    // socket.onopen = function(e) {\r\n    //     console.log(\"[open] Соединение установлено\");\r\n    // };\r\n    \r\n    // socket.onmessage = function(event) {\r\n    //     console.log(`[message] Данные получены : ${event.data}`);\r\n    //     RenderMessage(event.data, \"lightblue\", \"my friend\");\r\n    // };\r\n\r\n    // socket.onclose = function(event) {\r\n    // if (event.wasClean) {\r\n    //     console.log(`[close] Соединение закрыто чисто, код=${event.code} причина=${event.reason}`);\r\n    // } else {\r\n    //     console.log('[close] Соединение прервано');\r\n    // }\r\n    // };\r\n\r\n    // socket.onerror = function(error) {\r\n    //     console.log(`[error] ${error.message}`);\r\n    // };\r\n\r\n    // const sendMessage = (e) => {\r\n    //     e.preventDefault();\r\n    //     socket.send(e.currentTarget.message.value);\r\n    //     RenderMessage(e.currentTarget.message.value, \"#738DED\", \"me\")\r\n    // }\r\n\r\n    // const RenderMessage = (message, color, sender) => {\r\n    //     document.querySelector(\".chat\").insertAdjacentHTML(\"afterbegin\", `<div style=\"background:${color}\" class=\"income-message\">${sender}:${message}</div>`)\r\n    // }\r\n    // return(\r\n    //     <form onSubmit={sendMessage}>\r\n    //         <input name=\"message\" type=\"text\"></input>\r\n    //         <button type=\"submit\">Отправить</button>\r\n    //         <h3>Чат</h3>\r\n    //         <div className=\"chat\"/>\r\n    //     </form>\r\n    // )\r\n}\r\n\r\nexport default TestWebSocket;","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport { Switch, Route } from 'react-router';\r\nimport Auth from '../pages/auth/auth';\r\nimport Edit from '../pages/edit/edit';\r\nimport Dialogs from '../pages/dialogs/dialogs';\r\nimport ChatApp from '../chatApp/index'\r\nimport Contacts from '../pages/contacts/contacts';\r\nimport Cinema from '../pages/cinema/cinema';\r\nimport TestWebSocket from '../test/test';\r\n\r\n\r\nconst App = () => {\r\n    return (\r\n        <Switch>\r\n            <Route exact path=\"/\" component={Auth} />\r\n            <Route path=\"/edit\" component={Edit} />\r\n            <Route path=\"/dialogs\" component={Dialogs} />\r\n            <Route path=\"/contacts\" component={Contacts} />\r\n            <Route path=\"/cinema\" component={Cinema} />\r\n            <Route path=\"/test\" render={\r\n                () => {\r\n                    return <TestWebSocket />\r\n                }\r\n            } />\r\n            <Route path=\"/chatapp/:id\"\r\n                render={({ match }) => {\r\n                    const { id, groupId } = match.params;\r\n                    return <ChatApp dialogId={groupId} id={id} />\r\n                }}\r\n            />\r\n\r\n        </Switch>\r\n    )\r\n}\r\n\r\n\r\nexport default App;\r\n","const initialState = {\r\n    myUserName: '',\r\n    myWelcomeMessage: '',\r\n    myProfilePhoto: null,\r\n    myPassword: null,\r\n    myPhone: null\r\n}\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case \"SET_MY_PASSWORD\": {\r\n            return {\r\n                ...state,\r\n                myPassword: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_PHONE\": {\r\n            return {\r\n                ...state,\r\n                myPhone: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_PROFILE_PHOTO\": {\r\n            return {\r\n                ...state,\r\n                myProfilePhoto: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_WELCOME_MESSAGE\": {\r\n            return {\r\n                ...state,\r\n                myWelcomeMessage: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_USER_NAME\": {\r\n            return {\r\n                ...state,\r\n                myUserName: action.payload\r\n            }\r\n        }\r\n        case \"CLEAR_STATE\": {\r\n            return initialState;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import { createStore } from \"redux\";\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer); \r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\n\r\nimport store from './store';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}