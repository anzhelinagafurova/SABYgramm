(this.webpackJsonpsabygramm=this.webpackJsonpsabygramm||[]).push([[0],{50:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(27),i=a.n(n),c=a(3),o=a(7),r=a(8),l=a(11),d=a(10),u=a(9),m=function(){function e(){Object(o.a)(this,e),this.dialogData=[[{id:0,id_pair:1,name:"\u0410\u043d\u0436\u0435\u043b\u0438\u043d\u0430",lastMessage:"\u041a\u0430\u043a \u0442\u044b?",img:"https://bugaga.ru/uploads/posts/2016-12/1481556556_kot-volshebnik-1.jpg",timing:"15 \u043c"},{id:1,id_pair:2,name:"\u041a\u0440\u0438\u0441",lastMessage:"\u0412\u0441\u0442\u0430\u043b\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0432 6 \u0443\u0442\u0440\u0430 \u043f\u0440\u0438\u043a\u0438\u043d\u044c...",img:"https://yt3.ggpht.com/a/AATXAJynSQVjxLr742pi_eZXJxyzjfWLaRcCxgYaeJX_Cg=s900-c-k-c0xffffffff-no-rj-mo",timing:"1 \u0447"}],[{id:2,id_pair:3,name:"\u0421\u0435\u0440\u0433\u0435\u0439",lastMessage:"\u041d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u0432 \u0442\u0430\u0441\u043a\u0430\u0445",img:"https://i02.fotocdn.net/s110/defbcd4b451a9263/gallery_xl/2460844912.jpg",timing:"2 \u0447"},{id:3,id_pair:4,name:"\u042d\u0434\u0443\u0430\u0440\u0434",lastMessage:"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043f\u043e\u0434\u043e\u0448\u0435\u043b",img:"https://pm1.narvii.com/7357/dd8ddd1a25b83dcf20d7036a4656fc47b7aad917r1-1080-1198v2_hq.jpg",timing:"1 \u0434"},{id:7,id_pair:5,name:"\u0421\u0435\u0440\u0451\u0436\u0430",lastMessage:"\u041f\u0440\u0438\u0432\u0435\u0442, \u0443 \u043c\u0435\u043d\u044f \u0432\u043e\u043f\u0440\u043e\u0441",img:"https://i0.wp.com/prostolike.net/wp-content/uploads/2018/08/image3_700x669.jpg?w=700&ssl=1",timing:"2 \u0434"}],[{id:4,id_pair:6,name:"\u0412\u043e\u0432\u0430",lastMessage:"\u0412\u044b\u0443\u0447\u0438\u043b \u0440\u0435\u0430\u043a\u0442 \u0437\u0430 \u0447\u0430\u0441",img:"https://cutewallpaper.org/21/grumpy-cat-screensaver/Grumpy-Wallpapers-Wallpaper-Cave.jpg",timing:"2 \u0447"},{id:5,id_pair:7,name:"\u0421\u0430\u0448\u0430",lastMessage:"\u042f \u043d\u0430 2 \u044d\u0442\u0430\u0436\u0435 \u043a\u0443\u0434\u0430 \u0438\u0434\u0442\u0438?",img:"https://ustaliy.ru/wp-content/uploads/2019/03/universe.jpg",timing:"1 \u043d"},{id:6,id_pair:8,name:"\u041b\u0451\u0448\u0430",lastMessage:"\u042f \u0432 \u0441\u0442\u043e\u043b\u043e\u0432\u043e\u0439, \u0435\u0441\u043b\u0438 \u0447\u0442\u043e",img:"https://avatars.mds.yandex.net/get-zen_doc/1886729/pub_5d62dba6998ed600ad85c10e_5d62dbc135c8d800adef2383/scale_1200",timing:"2 \u043d"}]]}return Object(r.a)(e,[{key:"getMockedData",value:function(){return this.dialogData}},{key:"handleDialogs",value:function(e,t){return console.log("to"+e.group_number),fetch(t,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}},{key:"sendDataPost",value:function(e,t){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}},{key:"sendDataGet",value:function(e){return fetch(e,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}})}},{key:"getDialogData",value:function(){}}]),e}(),p=(a(50),a(0)),h=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).service=new m,e.state={phone:"",password:""},e.renderAuthPage=function(){return Object(p.jsxs)("section",{className:"login-container",children:[Object(p.jsx)("h1",{className:"login-text",children:"\u0432\u0445\u043e\u0434"}),Object(p.jsxs)("form",{className:"login-form",onSubmit:e.sendForm,children:[Object(p.jsxs)("div",{className:"tel-wrapper",children:[Object(p.jsx)("p",{className:"number-7",children:"+7"}),Object(p.jsx)("input",{type:"tel",name:"phoneNumber",placeholder:"\u0422\u0435\u043b. \u043d\u043e\u043c\u0435\u0440",maxLength:"10",pattern:"\\d*",required:!0})]}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",maxLength:"12",required:!0}),Object(p.jsx)("button",{type:"submit",className:"login-button",children:Object(p.jsx)("i",{className:"fas fa-play"})})]})]})},e.sendForm=function(t){t.preventDefault();var a=t.currentTarget,s=e.props,n=s.setProlifePhoto,i=s.setUserName,c=s.setWelcomeMessage,o=s.setId,r={phone:a.phoneNumber.value,password:a.password.value};e.service.sendDataPost(r,"").then((function(e){return e.json()})).then((function(t){0===t.status&&(i(t.name),c(t.welcome_msg),n(t.image_link),o(t.id),e.props.history.push("/dialogs"));(1===t.status&&alert("Password is incorrect!"),2===t.status)&&e.props.history.push("/edit")}))},e}return Object(r.a)(a,[{key:"render",value:function(){return this.renderAuthPage()}}]),a}(s.Component),g=Object(u.b)((function(e){return{myUserName:e.myUserName,myWelcomeMessage:e.myWelcomeMessage,myProfilePhoto:e.myProfilePhoto}}),(function(e){return{setPhone:function(t){var a=t.target.value;e({type:"SET_MY_PASSWORD",payload:a})},setPassword:function(t){var a=t.target.value;e({type:"SET_MY_PHONE",payload:a})},setId:function(t){e({type:"SET_MY_ID",payload:t})},setProlifePhoto:function(t){e({type:"SET_MY_PROFILE_PHOTO",payload:t})},setUserName:function(t){e({type:"SET_MY_USER_NAME",payload:t})},setWelcomeMessage:function(t){e({type:"SET_MY_WELCOME_MESSAGE",payload:t})}}}))(h),j=a(13),b=a.n(j),f=a(20),O=function(e){var t='<svg xmlns="http://www.w3.org/2000/svg" width="74" height="74" version="1.1">\n      <circle cx="37" cy="37" r="37" fill="white"></circle>\n    <text x="18" y="60" font-size="60" font-family="Roboto, sans-serif" fill="#738DED">'.concat(e,"\n          </text>  \n    </svg>"),a=new Blob([t],{type:"image/svg+xml"});return x(a)},v=function(e){return x(e.target.files[0])},x=function(e){return new Promise((function(t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)}}))},A=(a(53),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).service=new m,e.setPhoto=function(){var t=Object(f.a)(b.a.mark((function t(a){var s,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.currentTarget.closest("form"),t.next=3,v(a);case 3:return n=t.sent,t.t0=e.props,t.next=7,n;case 7:return t.t1=t.sent,t.t0.setProfilePhoto.call(t.t0,t.t1),t.next=11,n;case 11:s.pictureUrl.value=t.sent;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setData=function(){var t=Object(f.a)(b.a.mark((function t(a){var s,n,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s=a.currentTarget,e.props.photo){t.next=9;break}return t.next=5,O(s.username.value[0].toUpperCase());case 5:return n=t.sent,t.next=8,n;case 8:s.pictureUrl.value=t.sent;case 9:i={name:s.username.value,welcome_msg:s.message.value||"\u041f\u0440\u0438\u0432\u0435\u0442 \u0432\u0441\u0435\u043c \u0434\u0440\u0443\u0437\u044c\u044f\u043c!",image_link:s.pictureUrl.value||n},e.service.sendDataPost(i,"/edit"),e.props.setUserName(i.name),e.props.setWelcomeMessage(i.welcome_msg),e.props.setProfilePhoto(i.image_link),e.props.history.push("/dialogs");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.photo;return Object(p.jsx)("section",{className:"edit-container",children:Object(p.jsxs)("form",{className:"name-form",id:"editForm",onSubmit:this.setData,children:[Object(p.jsxs)("label",{htmlFor:"picture",id:"upload-background",className:"upload-background",children:[e?Object(p.jsx)("img",{src:e,alt:"Profile icon",className:"profile-photo"}):Object(p.jsx)("div",{className:"plus",children:"+"}),Object(p.jsx)("input",{type:"file",id:"picture",accept:"image/*",onChange:this.setPhoto})]}),Object(p.jsx)("input",{type:"text",name:"pictureUrl",hidden:!0}),Object(p.jsx)("p",{className:"photo-label",children:"\u0424\u043e\u0442\u043e"}),Object(p.jsx)("input",{type:"text",name:"username",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",maxLength:"25",required:!0}),Object(p.jsx)("input",{type:"text",name:"message",placeholder:"\u041f\u0440\u0438\u0432\u0435\u0442 \u0432\u0441\u0435\u043c \u0434\u0440\u0443\u0437\u044c\u044f\u043c!",maxLength:"200"}),Object(p.jsx)("button",{type:"submit",className:"edit-button",children:Object(p.jsx)("i",{className:"fas fa-play"})})]})})}}]),a}(s.Component)),y=Object(u.b)((function(e){var t=e.myProfilePhoto,a=e.myWelcomeMessage;return{name:e.myUserName,message:a,photo:t}}),(function(e){return{setProfilePhoto:function(t){return e({type:"SET_MY_PROFILE_PHOTO",payload:t})},setUserName:function(t){return e({type:"SET_MY_USER_NAME",payload:t})},setWelcomeMessage:function(t){return e({type:"SET_MY_WELCOME_MESSAGE",payload:t})}}}))(A),S=a(74),w=a(73),N=a(29),k=(a(54),a(55),Object(u.b)((function(e){return{update:e.update}}),(function(e){return{shouldUpdate:function(t){return e({type:"SHOULD_UPDATE",payload:t})}}}))((function(e){var t=e.display,a=e.groupId,s=e.id,n=e.margin,i=e.id_pair,o=e.shouldUpdate,r=new m,l=Object(c.f)(),d=function(e,t){r.handleDialogs({status:0,user_id:e,id_pair:i,group_number:t},"/dialogs"),l.push("/dialogs"),o(!0)};if("block"===t)switch(a){case 0:return Object(p.jsxs)("ul",{className:"settings",style:{display:"".concat(t),marginTop:"".concat(n)},children:[Object(p.jsx)("li",{onClick:function(){d(s,2)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0442\u0438\u0445\u0438\u043c"}),Object(p.jsx)("li",{onClick:function(){d(s,1)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u0440\u043e\u043a\u0438\u043c"}),Object(p.jsx)("li",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]});case 1:return Object(p.jsxs)("ul",{className:"settings",style:{display:"".concat(t),marginTop:"".concat(n)},children:[Object(p.jsx)("li",{onClick:function(){d(s,0)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0431\u0449\u0438\u043c"}),Object(p.jsx)("li",{onClick:function(){d(s,2)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0442\u0438\u0445\u0438\u043c"}),Object(p.jsx)("li",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]});case 2:return Object(p.jsxs)("ul",{className:"settings",style:{display:"".concat(t),marginTop:"".concat(n)},children:[Object(p.jsx)("li",{onClick:function(){d(s,0)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0431\u0449\u0438\u043c"}),Object(p.jsx)("li",{onClick:function(){d(s,1)},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u0440\u043e\u043a\u0438\u043c"}),Object(p.jsx)("li",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]});default:return Object(p.jsx)("div",{children:"ups..."})}return Object(p.jsx)("p",{})}))),M=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={display:"none",messagesUnread:0,lastMessage:null},s.timer=null,s.componentDidMount=function(){if(document.getElementById("root").addEventListener("click",(function(){s.setState({display:"none"})})),!s.props.sockets.find((function(e){return e.id===s.props.dialog.id_pair}))){var e=new WebSocket("ws://"+window.location.host+"/ws/room/".concat(s.props.dialog.id_pair,"/"));e.onopen=function(){console.log("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e. "+s.props.dialog.id_pair)},e.onclose=function(){console.log("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e. "+s.props.dialog.id_pair)},e.onmessage=function(e){console.log("\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b: "+e.data+" "+s.props.dialog.id_pair);var t=JSON.parse(e.data);t.user_id.toString()!==s.props.myId.toString()&&(s.setState({lastMessage:t.message}),s.props.addNotification(s.props.dialog.id_pair))},s.props.addSocket({id:s.props.dialog.id_pair,socket:e})}},s.touchend=function(){s.timer&&(clearTimeout(s.timer),s.timer=null)},s.touchstart=function(){s.timer||(s.timer=setTimeout((function(){s.setState({display:"block"})}),500))},s.onHistoryPush=function(){var e=s.props,t=e.dialog,a=t.name,n=t.img,i=t.id,c=t.id_pair,o=e.groupId;s.props.history.push({pathname:"/chatapp/".concat(c),state:{id:i,name:a,img:n,groupId:o,id_pair:c}})},s.handleClick=function(){"block"!==s.state.display&&s.onHistoryPush()},s.onHistoryPush=s.onHistoryPush.bind(Object(N.a)(s)),s}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.notifications.find((function(t){return t.id===e.props.dialog.id_pair}));console.log(t);var a=0;void 0!==t&&(a=t.counter);var s,n=this.props,i=n.dialog,c=i.name,o=i.lastMessage,r=i.img,l=i.id_pair,d=i.timing,u=i.id,m=n.groupId;s=d.toString().split(" ")[1].split(":")[0]+":"+d.toString().split(" ")[1].split(":")[1];var h="";switch(m){case 0:h="dialog-notification common-dialog";break;case 1:h="dialog-notification loud-dialog";break;case 2:h="dialog-notification silent-dialog";break;default:h="dialog-notification"}return Object(p.jsxs)("div",{className:"dialog",onTouchStart:this.touchstart,onTouchEnd:this.touchend,onMouseDown:this.touchstart,onMouseUp:this.touchend,onClick:this.handleClick,children:[Object(p.jsx)("img",{src:r||"https://media.istockphoto.com/photos/smiling-man-portrait-made-of-vegetables-and-fruits-picture-id466161171",alt:"dialogPicture",className:"dialog-img"}),Object(p.jsxs)("div",{className:"dialog-contain",children:[Object(p.jsx)("p",{className:"dialog-name",children:c}),Object(p.jsx)("p",{className:"dialog-message",children:this.state.lastMessage||o})]}),Object(p.jsxs)("div",{className:"dialog-timeNot",children:[Object(p.jsx)("p",{className:"dialog-timing",children:s}),0!==a?Object(p.jsx)("p",{className:h,children:a}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsx)(k,{groupId:m,display:this.state.display,id_pair:l,id:u,margin:"55px"})]})}}]),a}(s.Component),E=Object(c.h)(Object(u.b)((function(e){return{myId:e.myId,notifications:e.notifications,sockets:e.sockets}}),(function(e){return{addSocket:function(t){return e({type:"ADD_SOCKET",payload:t})},addNotification:function(t){return e({type:"ADD_NOTIFICATION",payload:t})}}}))(M)),C=a(17),I=a(16),D=(a(57),function(e){var t=e.groupId,a=e.onSearch,n=e.dialogs,i=e.onSettings,c=Object(s.useState)(!1),o=Object(C.a)(c,2),r=o[0],l=o[1],d=null;switch(t){case 0:d="\u041e\u0431\u0449\u0438\u0435";break;case 1:d="\u0413\u0440\u043e\u043c\u043a\u0438\u0435";break;case 2:d="\u0422\u0438\u0445\u0438\u0435";break;case"all":d="\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b";break;default:d=null}return Object(p.jsxs)("header",{className:"dialogs-header",children:[d&&Object(p.jsx)("i",{className:"fa fa-bars","aria-hidden":"true",onClick:i}),d&&Object(p.jsx)(I.b,{to:"/dialogs",children:Object(p.jsx)("i",{className:"fa fa-users","aria-hidden":"true"})}),Object(p.jsx)("div",{className:"group-name",children:d}),Object(p.jsx)("input",{type:"text",className:"dialogs-search",onInput:function(e){var s=[];"all"===t?n.forEach((function(t){t.forEach((function(t){t.name.toLowerCase().includes(e.target.value.toLowerCase())&&s.push(t)}))})):n[t].forEach((function(t){t.name.toLowerCase().includes(e.target.value.toLowerCase())&&s.push(t)})),a(s)},onBlur:function(e){a(null),l(!1),e.target.value=null},hidden:!r,autoFocus:!0}),d&&Object(p.jsx)("i",{className:"fa fa-search","aria-hidden":"true",onClick:function(){l(!1===r)}})]})}),P=(a(58),a(59),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).service=new m,e.state={placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",resultHidden:!0,defaultValue:null,result:{},loading:!1},e.changePlaceholderFocus=function(){e.setState({placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",defaultValue:"+7"})},e.changePlaceholderBlur=function(){e.setState({placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442",defaultValue:null})},e.changePhone=function(t){12===t.target.value.length&&(e.setState({loading:!0}),e.service.sendDataPost({status:1,phone:t.target.value.slice(2)},"/contacts").then((function(e){return e.json()})).then((function(t){e.setState({result:t,resultHidden:!1,loading:!1})})))},e.addContact=function(t){e.service.sendDataPost({status:2,user2_id:e.state.result.id},"/contacts").then((function(e){return e.json()})).then((function(e){void 0!==e.dialog_id&&alert("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432!")}))},e}return Object(r.a)(a,[{key:"renderResult",value:function(){return 1===this.state.result.status?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{src:this.state.result.image_link,alt:"avatar"}),Object(p.jsx)("span",{children:this.state.result.name}),Object(p.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",onClick:this.addContact})]}):0===this.state.result.status?Object(p.jsx)("p",{children:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):this.state.loading?Object(p.jsx)("p",{children:"\u0418\u0434\u0451\u0442 \u043f\u043e\u0438\u0441\u043a..."}):void 0}},{key:"render",value:function(){return Object(p.jsxs)("form",{className:"add-contact-form",children:[Object(p.jsx)("input",{type:"tel",className:"add-contact",placeholder:this.state.placeholder,onFocus:this.changePlaceholderFocus,onBlur:this.changePlaceholderBlur,onChange:this.changePhone,maxLength:"12",defaultValue:this.state.defaultValue}),Object(p.jsx)("div",{className:"add-contact-result-container",hidden:this.state.resultHidden,children:Object(p.jsx)("div",{className:"add-contact-result",children:this.renderResult()})})]})}}]),a}(s.Component)),T=(a(60),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACySURBVHgB7ZOhDsJADECvBIXeNBo+AjQWPoKvmIIEjSMBh95HgMZjmZ8Fe7xmXZiCa4Jck5fbenm9XtKT4IgY44xlZb8bEaldMpwgt+89ZJIq28kvuHFyabnF0CFv4QkFOd26hM91vratread3Ah2cLTi6bLlM8v38j/lcTthbpkYwCQ0A7LsyiwFlEzd9VeBKZyhRlx7ZA0d5bb1CrTdORxSZA3Re4bmkTysSIV8D4nxBulz6F4h5s8kAAAAAElFTkSuQmCC"),_=new m,L=function(){return Object(p.jsxs)("div",{className:"link-controllers ",children:[Object(p.jsx)(I.b,{to:"/contacts",className:"left-controller",children:Object(p.jsxs)("div",{className:"link-contain",children:[Object(p.jsx)("div",{className:"icon",children:Object(p.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO6SURBVHgB1Vn9ddMwEL/k8T9hgqoTNJ0AMwHZgGyQbJB0AsIEoRMAEzhMkDKBnQlcJhBWclfLsj7ubKfA7z1Xrk6n+9JJZwXgCtBar+on1xdU+K7gf0Ct6F6HsYbXRC0wQ+9VqIB5X0bGb3Bcgbwz4/n62VpGzMeSl1J+E/HkJsBTIH3hoe2QthtLXkz5pcW8RU+aZ231Zw6Pwv4qMGeG9OMY8lIG5Mi09tBoOeQBAwqIG5CPIS9lAGHmoc1CntbN2s08tD3S9mPJixlQMSbUHhp5q9CYfDj+s6WkGktezIAcebYe2ioW0rr/qw5jPba8kAGZLVQ3SbWx+pcRfpOURxxHB1l2LXmhSbc6jC2MjKvIQ0/mXE8OxWvLc4VTyKuIJwt92Y0U/EvQlzOg0HwUVzPC8mSRUGBu8dDYo47XOnPdJHdh9a8Y8vZJo4WeXCLPwhIyA56DCuRZYN83nshE5HTbk1nMUOudijR2qaybGmdP82l+5PLQoEziSYsvR75MwENR+y7gMZHrlCpTawx54MdkMnkGPhS2Ep4nbO+4DKjTI/77Eq2pR5ESZFAo4InLUI8tiVcSbWh0U9RhG3DjDErCWrds5T3KvAU+KMqKOnwRkCyFWQ8eAhl9z2d54SFnew2QeJMi8AvkODlyOShdnrMBuA7N89wzgUuQo3TmSAJ1M8+Mcmc6UBHaRYbkgAIZWnngGiBdy2PkAHsrdfiU+eMaIF3L5xyQbKEWOjsKE63cGbqEzkrofpdPi54yS2yV+UMGiM8AxAO2e2ktZHjw30eQwZsDhPcgQL10dnVD9YzkRFXYmrJlCzJ0Dz7d/qg+F3TAxMBijn3ToLtl/tIdsHYGsTxqVYgKmNCJa8gAD6GKLlfLiBvGpHOpIhZvJZATvLacRvjeQRoK2z7b6AHbD4yxwfPGZ0DpMMVAtdBPkOPkzBGDyABJkUW71pAIcE5iMuC3S3gDw0DeMx/l1FfWz71bFGKSH6EbWUkEOrkWW0IK0vDVQAqaU9bGHPzLklNHKWxPLmEKA1B7+XZioe76giSfV6nvYdLGLQxALALJ7c2DVqXoYEjprbAtXUKvCOjLDxaF57A7YHvHVQL3+Pjh1JQPom1UQRhzpLeWCt42GCGt2wZ8D5XeZh5D/whh9DoHFPSYMMAfu73wjWfL65vEwW0Nmo8iOzr0foKR5XXOAbMMcE8/1x8QQT3Wp5Dx8idoG6CwPYwtLxSBEtIoE/12Iqd2oBL6yxsXVuXog+Sj5+9B+39jYH8kSfAH59pcMpQFQ70AAAAASUVORK5CYII=",alt:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})}),Object(p.jsx)("p",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})}),Object(p.jsx)(I.b,{to:"/cinema",children:Object(p.jsxs)("div",{className:"link-contain",children:[Object(p.jsx)("div",{className:"icon",children:Object(p.jsx)("img",{src:"data:image/png;base64,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",alt:"\u041a\u0438\u043d\u043e\u0442\u0435\u0430\u0442\u0440"})}),Object(p.jsx)("p",{children:"\u041a\u0438\u043d\u043e\u0442\u0435\u0430\u0442\u0440"})]})})]})},U=Object(u.b)((function(e){return{myUserName:e.myUserName,myWelcomeMessage:e.myWelcomeMessage,myProfilePhoto:e.myProfilePhoto}}),(function(e){return{setProfilePhoto:function(t){return e({type:"SET_MY_PROFILE_PHOTO",payload:t})},setUserName:function(t){return e({type:"SET_MY_USER_NAME",payload:t})},setWelcomeMessage:function(t){return e({type:"SET_MY_WELCOME_MESSAGE",payload:t})},clearState:function(){return e({type:"CLEAR_STATE"})}}}))((function(e){var t=e.myUserName,a=e.myWelcomeMessage,s=e.myProfilePhoto,n=e.setProfilePhoto,i=e.setUserName,c=e.setWelcomeMessage,o=e.clearState,r=function(){var e=Object(f.a)(b.a.mark((function e(t){var a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget.closest("form"),e.next=3,v(t);case 3:return s=e.sent,e.t0=n,e.next=7,s;case 7:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=11,s;case 11:a.pictureUrl.value=e.sent;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(f.a)(b.a.mark((function e(t){var a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.currentTarget,s={status:1,name:a.username.value,welcome_msg:a.message.value,image_link:a.pictureUrl.value},console.log("name"+s.name),console.log("welcome_msg"+s.welcome_msg),console.log("image_link"+s.image_link),_.sendDataPost(s,"/dialogs"),i(s.name),c(s.welcome_msg);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){_.sendDataPost({status:99},"/dialogs"),o()};return Object(p.jsxs)("div",{className:"setting-page",children:[L(),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("form",{name:"profileInfo",className:"profileInfo",onSubmit:l,children:[Object(p.jsxs)("label",{htmlFor:"picture",id:"upload-background",className:"upload-background-profile",children:[Object(p.jsx)("img",{src:s,alt:"Profile icon",className:"photo-settings"}),Object(p.jsx)("input",{className:"profile-photo-settings",type:"file",id:"picture",accept:"image/*",onChange:r})]}),Object(p.jsx)("input",{type:"text",name:"pictureUrl",hidden:!0}),Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"text",className:"username-field",name:"username",defaultValue:t,maxLength:"25"}),Object(p.jsx)("img",{src:T,alt:"edit",className:"settings-pencil"})]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"text",className:"message-field",name:"message",defaultValue:a,maxLength:"200"}),Object(p.jsx)("img",{src:T,alt:"edit",className:"settings-pencil"})]}),Object(p.jsx)("button",{type:"submit",className:"profileInfo-button",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(p.jsx)(I.b,{to:"/",className:"profileInfo-button exit-button",onClick:d,children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(p.jsx)("span",{className:"saby-gramm",children:"SABYgramm \xa9"})]})]})})),F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).service=new m,e.state={slideGroup:0,itemsFound:null,dialogs:[]},e.slideSettings=function(){document.querySelector(".swiper-container").swiper.slideTo(0)},e.slideChanged=function(t){t&&e.setState({slideGroup:t.activeIndex-1})},e.renderSearchItems=function(t){e.setState({itemsFound:t})},e.addContact=function(){if(e.state.dialogs[0]&&0===e.state.dialogs[0].length&&0===e.state.dialogs[1].length&&0===e.state.dialogs[2].length)return Object(p.jsx)(P,{})},e.renderDialog=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null;return s=t||e,e?Object(p.jsx)("div",{children:s.map((function(e){return Object(p.jsx)(E,{dialog:e,groupId:a},e.id_pair)}))}):Object(p.jsx)("div",{})},e}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.props.update;console.log(e),e&&(this.updateDialogs(),this.props.shouldUpdate(!1))}},{key:"componentDidMount",value:function(){this.updateDialogs(),this.props.shouldUpdate(!1)}},{key:"updateDialogs",value:function(){var e=this;this.service.sendDataPost({status:80},"/dialogs").then((function(e){return e.json()})).then((function(t){e.setState({dialogs:t})}))}},{key:"render",value:function(){return Object(p.jsxs)(S.a,{className:"mySwiper",initialSlide:"1",onSlideChange:this.slideChanged,children:[Object(p.jsx)(D,{slot:"container-start",groupId:this.state.slideGroup,onSearch:this.renderSearchItems,dialogs:this.state.dialogs,onSettings:this.slideSettings}),Object(p.jsxs)("div",{className:"dialog-container",children:[Object(p.jsx)(w.a,{children:Object(p.jsx)(U,{})}),Object(p.jsxs)(w.a,{children:[this.addContact(),this.renderDialog(this.state.dialogs[0],this.state.itemsFound,0)]}),Object(p.jsxs)(w.a,{children:[this.addContact(),this.renderDialog(this.state.dialogs[1],this.state.itemsFound,1)]}),Object(p.jsxs)(w.a,{children:[this.addContact(),this.renderDialog(this.state.dialogs[2],this.state.itemsFound,2)]})]})]})}}]),a}(s.Component),B=Object(u.b)((function(e){return{update:e.update}}),(function(e){return{shouldUpdate:function(t){return e({type:"SHOULD_UPDATE",payload:t})}}}))(F),R=a(6),Y=a(35),H=a(36),G=a(39),Q=a.n(G),J=function(e){var t=e.msgInput.current,a=function(){var t=Object(f.a)(b.a.mark((function t(a){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),s=a.target.message.value,(0,e.sendSocketMessage)(s),s.length>0&&(e.addNewMessage(s,"outgoing"),a.target.message.value="");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=Object(s.useState)(!1),i=Object(C.a)(n,2),c=i[0],o=i[1];return Object(p.jsxs)("form",{className:e.editMode?"message-form editing-input":"message-form",onSubmit:a,children:[Object(p.jsx)("div",{className:c?"emoji-picker":"hidden",children:Object(p.jsx)(Q.a,{disableAutoFocus:!0,onEmojiClick:function(a,s){o(!1);var n=t.selectionStart,i=t.selectionEnd-t.selectionStart,c=t.value.split("");c.splice(n,i,s.emoji);var r=c.join("");e.setSavedMsg(r),t.focus(),t.selectionStart=t.selectionEnd=n+1}})}),Object(p.jsx)("button",{type:"button",className:"open-emojis",onClick:function(e){e.preventDefault(),o(!c)},children:Object(p.jsx)(Y.a,{icon:H.b})}),Object(p.jsx)("input",{name:"message",id:"message-input",type:"text",ref:e.msgInput,className:"message-input",placeholder:"Message",autoComplete:"off"}),Object(p.jsxs)("button",{type:"submit",className:"send-message",children:[Object(p.jsx)("span",{className:"sr-only",children:"send"}),Object(p.jsx)(Y.a,{icon:H.a})]})]},"MessageForm")},W=function(e){var t=function(e){return e.toString().split(" ")[1].split(":")[0]+":"+e.toString().split(" ")[1].split(":")[1]};return Object(p.jsx)(p.Fragment,{children:"outgoing"===e.message.direction?Object(p.jsx)("div",{className:"outgoing",children:Object(p.jsxs)("button",{className:e.editMode&&e.index===e.editIndex?"message editing":"message",onClick:function(){return e.enterEditMode(e.index)},children:[e.message.message,Object(p.jsx)("p",{className:"msg-date",children:e.message.edit?"\u0440\u0435\u0434. "+t(e.message.edit):t(e.message.time)})]})}):Object(p.jsx)("div",{className:"incoming",children:Object(p.jsxs)("div",{className:"message",children:[e.message.message,Object(p.jsx)("p",{className:"msg-date",children:e.message.edit?"\u0440\u0435\u0434. "+t(e.message.edit):t(e.message.time)})]})})})},Z=function(e){var t=e.messages.name,a=e.messages.messages,n=Object(s.useRef)(null);return Object(s.useEffect)((function(){n&&n.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight})}))}),[]),Object(p.jsxs)("div",{className:"chat-window",children:[Object(p.jsx)("ul",{className:"message-list",ref:n,children:0!==a.length?a.map((function(t,a){return Object(p.jsx)("div",{className:"margin",children:Object(p.jsx)("li",{children:Object(p.jsx)(W,{message:t,enterEditMode:e.enterEditMode,index:a,editMode:e.editMode,editIndex:e.editIndex})},a)})})):null}),0===a.length?Object(p.jsxs)("p",{className:"no-message",children:["This is the beginning of your conversation with"," ",t]}):null,Object(p.jsx)(J,{addNewMessage:e.addNewMessage,updateSaved:e.updateSaved,setSavedMsg:e.setSavedMsg,savedMsg:e.savedMsg,currentMessages:a,updateMessage:e.updateMessage,editMode:e.editMode,setEditMode:e.setEditMode,editIndex:e.editIndex,enterEditMode:e.enterEditMode,lastMessageIndex:a.length-1,msgInput:e.msgInput,sendSocketMessage:e.sendSocketMessage})]})},X=(a(64),a(65),function(e){var t=e.groupId,a=e.name,n=e.img,i=e.id,o=e.id_pair,r=Object(s.useState)("none"),l=Object(C.a)(r,2),d=l[0],u=l[1],m=null,h=Object(c.f)();switch(t){case 0:m="\u041e\u0431\u0449\u0438\u0435";break;case 1:m="\u0413\u0440\u043e\u043c\u043a\u0438\u0435";break;case 2:m="\u0422\u0438\u0445\u0438\u0435";break;default:m=null}return Object(p.jsxs)("header",{className:"message-header",children:[Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"22",viewBox:"0 0 32 24",fill:"none",onClick:function(){return h.push("/dialogs")},children:Object(p.jsx)("path",{d:"M0.939339 10.9393C0.353552 11.5251 0.353552 12.4749 0.939339 13.0607L10.4853 22.6066C11.0711 23.1924 12.0208 23.1924 12.6066 22.6066C13.1924 22.0208 13.1924 21.0711 12.6066 20.4853L4.12132 12L12.6066 3.51472C13.1924 2.92893 13.1924 1.97919 12.6066 1.3934C12.0208 0.807614 11.0711 0.807613 10.4853 1.3934L0.939339 10.9393ZM32 10.5L2 10.5L2 13.5L32 13.5L32 10.5Z",fill:"white"})}),Object(p.jsx)("img",{src:n||"https://media.istockphoto.com/photos/smiling-man-portrait-made-of-vegetables-and-fruits-picture-id466161171",alt:"dialogPicture",className:"message-dialog-img"}),Object(p.jsxs)("div",{className:"flex-names",children:[Object(p.jsx)("div",{className:"user-name",children:a}),Object(p.jsx)("div",{className:"group-name",children:m})]}),Object(p.jsx)("i",{className:"fas fa-ellipsis-v",onClick:function(){u("block"===d?"none":"block")}}),Object(p.jsx)(k,{display:d,groupId:t,id:i,id_pair:o,margin:"85px"})]})}),q=new m,z=Object(u.b)((function(e){return{myId:e.myId,sockets:e.sockets}}),(function(e){return{readNotification:function(t){return e({type:"READ_NOTIFICATION",payload:t})}}}))((function(e){var t=Object(c.g)();if(t.state)var a=t.state,n=a.groupId,i=a.name,o=a.img,r=a.id_pair,l=a.id;else n=0,i="Vasya",o="https://i1.sndcdn.com/artworks-000094489636-qzznk3-t500x500.jpg",r=1e4;e.readNotification(r);var d=Object(s.useState)("0"),u=Object(C.a)(d,1)[0],m=Object(s.useState)(!1),h=Object(C.a)(m,2),g=h[0],j=h[1],b=Object(s.useState)(null),f=Object(C.a)(b,2),O=f[0],v=f[1],x=Object(s.useRef)(),A=Object(s.useState)({0:{name:i,messages:[],saved:"",editMode:!1,groupId:n,img:o,id_pair:r,id:l}}),y=Object(C.a)(A,2),S=y[0],w=y[1],N=Object(s.useState)(""),k=Object(C.a)(N,2),M=k[0],E=k[1],I=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).toLocaleString(),s=S[u];s.messages.push({message:e,time:a,direction:t});var n=Object(R.a)({},S);n[u]=s,w(n)},D=e.sockets.find((function(e){return e.id===r})).socket;Object(s.useEffect)((function(){q.sendDataPost({id_pair:r,status:2,my_id:e.myId},"/dialogs").then((function(e){return e.json()})).then((function(e){e.forEach((function(e){var t;1===e.status&&(t=1===e.direction?"incoming":"outgoing"),0===e.status&&(t=0===e.direction?"incoming":"outgoing"),I(e.message,t,e.time)}))})),D.onopen=function(){console.log("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e. ChatApp "+r)},D.onmessage=function(t){console.log("\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b ChatApp: "+t.data);var a=JSON.parse(t.data);a.user_id.toString()!==e.myId.toString()&&I(a.message,"incoming")}}),[r]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(X,{groupId:S[u].groupId,name:S[u].name,img:S[u].img,id_pair:S[u].id_pair,id:S[u].id}),Object(p.jsx)("div",{className:"chat-container",children:Object(p.jsx)(Z,{messages:S[u],addNewMessage:I,updateSaved:function(e){var t=S[u];t.saved=e;var a=Object(R.a)({},S);a[u]=t,w(a)},setSavedMsg:E,savedMsg:M,editMode:g,setEditMode:j,editIndex:O,setEditIndex:v,updateMessage:function(e){if(e.trim().length>0){var t=S[u],a=(new Date).toLocaleString();t.messages[O].message=e,t.messages[O].edit=a;var s=Object(R.a)({},S);s[u]=t,w(s)}j(!1),E("")},msgInput:x,enterEditMode:function(e){var t=S[u].messages[e].message;v(e),E(t),j(!0),x.current.focus()},sendSocketMessage:function(e){D.readyState?D.send(JSON.stringify({message:e,user2_id:l,id_pair:r})):setTimeout((function(){D.send(JSON.stringify({message:e,user2_id:l,id_pair:r}))}),200)}})})]})})),K=a(19),V=(a(66),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).service=new m,e.state={slideGroup:"all",itemsFound:null,dialogs:[]},e.slideChanged=function(t){t&&1===t.activeIndex?e.setState({slideGroup:"all"}):e.setState({slideGroup:null})},e.renderSearchItems=function(t){e.setState({itemsFound:t})},e.addContact=function(){return Object(p.jsx)(P,{})},e.slideSettings=function(){document.querySelector(".swiper-container").swiper.slideTo(0)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.service.sendDataPost({status:80},"/dialogs").then((function(e){return e.json()})).then((function(t){e.setState({dialogs:t})}))}},{key:"render",value:function(){return Object(p.jsxs)(S.a,{className:"mySwiper",initialSlide:"1",onSlideChange:this.slideChanged,children:[Object(p.jsx)(D,{slot:"container-start",groupId:this.state.slideGroup,onSettings:this.slideSettings,onSearch:this.renderSearchItems,dialogs:this.state.dialogs}),Object(p.jsx)(w.a,{children:Object(p.jsx)(U,{})}),Object(p.jsxs)(w.a,{children:[this.addContact(),Object(p.jsx)($,{dialogs:this.state.dialogs,itemsFound:this.state.itemsFound})]})]})}}]),a}(s.Component)),$=function(e){var t=e.dialogs,a=e.itemsFound,s=void 0===a?null:a,n=null;return 0!==t.length&&(n=s||[].concat(Object(K.a)(t[0]),Object(K.a)(t[1]),Object(K.a)(t[2]))),n?Object(p.jsx)("div",{className:"dialog-container",children:n.map((function(e){return Object(p.jsxs)("div",{className:"contact",children:[Object(p.jsx)("img",{src:e.img,alt:"dialogPicture",className:"contacts-img"}),e.name]},e.id)}))}):Object(p.jsx)("div",{})},ee=(a(67),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).service=new m,e.state={placeholder:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c",resultHidden:!0,defaultValue:null,result:{},loading:!0},e.changePlaceholderFocus=function(){e.setState({placeholder:"\u0418\u043c\u044f",defaultValue:""})},e.changePlaceholderBlur=function(){e.setState({placeholder:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c",defaultValue:null})},e.changePhone=function(t){12===t.target.value.length&&(e.setState({loading:!0}),e.service.sendDataPost({status:1,phone:t.target.value.slice(2)},"/contacts").then((function(e){return e.json()})).then((function(t){e.setState({result:t,resultHidden:!1,loading:!1})})))},e.addContact=function(t){e.service.sendDataPost({status:2,user2_id:e.state.result.id},"/contacts").then((function(e){return e.json()})).then((function(e){void 0!==e.dialog_id&&alert("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432!")}))},e}return Object(r.a)(a,[{key:"renderResult",value:function(){return 1===this.state.result.status?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{src:this.state.result.image_link,alt:"avatar"}),Object(p.jsx)("span",{children:this.state.result.name}),Object(p.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",onClick:this.addContact})]}):0===this.state.result.status?Object(p.jsx)("p",{children:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):this.state.loading?Object(p.jsx)("p",{children:"\u0418\u0434\u0451\u0442 \u043f\u043e\u0438\u0441\u043a..."}):void 0}},{key:"render",value:function(){return Object(p.jsxs)("form",{className:"add-friend-form",children:[Object(p.jsx)("input",{type:"tel",className:"add-friend",placeholder:this.state.placeholder,onFocus:this.changePlaceholderFocus,onBlur:this.changePlaceholderBlur,onChange:this.changePhone,maxLength:"12",defaultValue:this.state.defaultValue}),Object(p.jsx)("div",{className:"add-friend-result-container",hidden:this.state.resultHidden,children:Object(p.jsx)("div",{className:"add-friend-result",children:this.renderResult()})})]})}}]),a}(s.Component)),te=(a(68),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={link:"https://www.youtube.com/embed/3jT_q7dt-cM"},e.changeLink=function(t){e.setState({link:"".concat(t.target.value)})},e}return Object(r.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"cinema-page",children:[Object(p.jsx)("iframe",{className:"movie",width:"560",height:"315",src:this.state.link,frameborder:"0",allowfullscreen:!0}),Object(p.jsxs)("div",{className:"blue-div-link",children:[Object(p.jsx)("input",{className:"link",value:"https://www.youtube.com/embed/3jT_q7dt-cM",placeholder:"https://www.youtube.com/embed/3jT_q7dt-cM",onChange:this.changeLink}),Object(p.jsx)(ee,{}),Object(p.jsx)(z,{})]})]})}}]),a}(s.Component)),ae=(a(69),function(){return Object(p.jsxs)(c.c,{children:[Object(p.jsx)(c.a,{exact:!0,path:"/",component:g}),Object(p.jsx)(c.a,{path:"/edit",component:y}),Object(p.jsx)(c.a,{path:"/dialogs",component:B}),Object(p.jsx)(c.a,{path:"/contacts",component:V}),Object(p.jsx)(c.a,{path:"/cinema",component:te}),Object(p.jsx)(c.a,{path:"/chatapp/:id",render:function(e){var t=e.match.params,a=t.id,s=t.groupId;return Object(p.jsx)(z,{dialogId:s,id:a})}})]})}),se=a(40),ne=a(22),ie=a(37),ce=a(41),oe=a.n(ce),re={myId:"",myUserName:"",myWelcomeMessage:"",myProfilePhoto:null,myPassword:null,myPhone:null,update:!1,sockets:[{id:1e4,socket:new WebSocket("ws://"+window.location.host+"/ws/room/100/")}],notifications:[]},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTIFICATION":var a,s,n;console.log(e.notifications),console.log(e.sockets);var i=e.notifications.findIndex((function(e){return e.id===t.payload}));if(-1===i)a=1,s={id:t.payload,counter:a},n=[].concat(Object(K.a)(e.notifications),[s]);else{var c=e.notifications.find((function(e){return e.id===t.payload}));a=c.counter+1,s={id:t.payload,counter:a},n=[].concat(Object(K.a)(e.notifications.slice(0,i)),[s],Object(K.a)(e.notifications.slice(i+1)))}return Object(R.a)(Object(R.a)({},e),{},{notifications:n});case"READ_NOTIFICATION":var o=e.notifications.findIndex((function(e){return e.id===t.payload})),r={id:t.payload,counter:0},l=[].concat(Object(K.a)(e.notifications.slice(0,o)),[r],Object(K.a)(e.notifications.slice(o+1)));return Object(R.a)(Object(R.a)({},e),{},{notifications:l});case"ADD_SOCKET":var d=[].concat(Object(K.a)(e.sockets),[t.payload]);return Object(R.a)(Object(R.a)({},e),{},{sockets:d});case"SET_MY_ID":return Object(R.a)(Object(R.a)({},e),{},{myId:t.payload});case"SET_MY_PASSWORD":return Object(R.a)(Object(R.a)({},e),{},{myPassword:t.payload});case"SET_MY_PHONE":return Object(R.a)(Object(R.a)({},e),{},{myPhone:t.payload});case"SET_MY_PROFILE_PHOTO":return Object(R.a)(Object(R.a)({},e),{},{myProfilePhoto:t.payload});case"SET_MY_WELCOME_MESSAGE":return Object(R.a)(Object(R.a)({},e),{},{myWelcomeMessage:t.payload});case"SET_MY_USER_NAME":return Object(R.a)(Object(R.a)({},e),{},{myUserName:t.payload});case"CLEAR_STATE":return re;case"SHOULD_UPDATE":return Object(R.a)(Object(R.a)({},e),{},{update:t.payload});default:return e}},de={key:"root",storage:oe.a},ue=Object(ie.a)(de,le),me=Object(ne.b)(ue),pe=Object(ie.b)(me);i.a.render(Object(p.jsx)(u.a,{store:me,children:Object(p.jsx)(se.a,{loading:null,persistor:pe,children:Object(p.jsx)(I.a,{children:Object(p.jsx)(ae,{})})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.64cb585c.chunk.js.map