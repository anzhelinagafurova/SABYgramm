{"version":3,"sources":["services/SabygramService.js","components/pages/auth/auth.js","components/helpers/functions.js","components/pages/edit/edit.js","components/chatMenu/chatMenu.js","components/dialogItem/dialogItem.js","components/header/index.js","components/header/header.js","components/addContact/addContact.js","img/3.png","components/pages/settingPage/settingPage.js","img/1.png","img/2.png","components/pages/settingPage/index.js","components/pages/dialogs/dialogs.js","components/msgForm/index.js","components/message/index.js","components/chatWindow/index.js","components/msgHeader/index.js","components/msgHeader/header.js","components/chatApp/index.js","components/pages/contacts/contacts.js","components/inviteFriend/inviteFriend.js","components/pages/cinema/cinema.js","components/app/index.js","components/app/app.js","reducers/index.js","store.js","index.js"],"names":["SabygramService","dialogData","id","id_pair","name","lastMessage","img","timing","this","data","url","console","log","group_number","fetch","method","headers","body","JSON","stringify","Auth","service","state","phone","password","renderAuthPage","className","onSubmit","sendForm","type","placeholder","maxLength","pattern","required","e","preventDefault","form","currentTarget","props","setProlifePhoto","setUserName","setWelcomeMessage","setId","userInfo","phoneNumber","value","sendDataPost","then","result","json","answer","status","welcome_msg","image_link","history","push","alert","Component","connect","myUserName","myWelcomeMessage","myProfilePhoto","dispatch","setPhone","newPhone","target","payload","setPassword","newPassword","photo","message","createPictureBlob","letter","newPhotoSvg","blob","Blob","createReader","readPhoto","files","Promise","resolve","reader","FileReader","readAsDataURL","onload","Edit","setPhoto","a","closest","setProfilePhoto","pictureUrl","setData","username","toUpperCase","profilePicSvg","htmlFor","src","alt","accept","onChange","hidden","ChatMenu","display","groupId","margin","onUpdate","useHistory","onHandleClicked","handleDialogs","user_id","style","marginTop","onClick","DialogItem","messagesUnread","timer","componentDidMount","document","getElementById","addEventListener","setState","socket","WebSocket","window","location","host","dialog","onopen","onclose","onmessage","event","parse","toString","myId","addSocket","touchend","clearTimeout","touchstart","setTimeout","onHistoryPush","pathname","handleClick","bind","time","split","clazz","onTouchStart","onTouchEnd","onMouseDown","onMouseUp","withRouter","socketInfo","Header","onSearch","dialogs","onSettings","useState","inputVisible","setVisibility","groupName","to","onInput","dialogsFound","forEach","dialogGroup","toLowerCase","includes","onBlur","autoFocus","AddContact","resultHidden","defaultValue","loading","changePlaceholderFocus","changePlaceholderBlur","changePhone","length","slice","addContact","user2_id","undefined","dialog_id","onFocus","renderResult","renderLinks","SettingPage","clearState","handleExit","pencilImg","Dialogs","slideGroup","itemsFound","update","slideSettings","querySelector","swiper","slideTo","slideChanged","activeIndex","renderSearchItems","renderDialog","toSearchIn","map","sendDataGet","updateDialogs","initialSlide","onSlideChange","slot","MsgForm","input","msgInput","current","handleSubmit","sendSocketMessage","addNewMessage","displayEmojis","setDisplayEmojis","editMode","disableAutoFocus","onEmojiClick","emojiObject","cursorPosition","selectionStart","selectionLength","selectionEnd","textArray","splice","emoji","newText","join","setSavedMsg","focus","icon","faSmile","ref","autoComplete","faPaperPlane","Message","formatTime","direction","index","editIndex","enterEditMode","edit","ChatWindow","currentFriend","messages","currentMessages","messageList","useRef","useEffect","scroll","top","scrollHeight","updateSaved","savedMsg","updateMessage","setEditMode","lastMessageIndex","dotsClicked","dotsClick","xmlns","width","height","viewBox","fill","d","sockets","useLocation","currentConv","setEditIndex","saved","newMessage","Date","toLocaleString","selectedConv","updatedData","find","my_id","handledDirection","msg","trim","savedMessage","readyState","send","Contacts","RenderContact","InviteFriend","Cinema","link","changeLink","frameborder","allowfullscreen","App","exact","path","component","render","match","params","dialogId","initialState","myPassword","myPhone","reducer","action","newSockets","shouldUpdate","store","createStore","ReactDOM"],"mappings":"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","file":"static/js/main.00ab8f43.chunk.js","sourcesContent":["export default class SabygramService {\r\n    dialogData = [\r\n        [\r\n            {\r\n                id: 0,\r\n                id_pair: 1,\r\n                name: \"Анжелина\",\r\n                lastMessage: \"Как ты?\",\r\n                img: \"https://bugaga.ru/uploads/posts/2016-12/1481556556_kot-volshebnik-1.jpg\",\r\n                timing: \"15 м\"\r\n            },\r\n            {\r\n                id: 1,\r\n                id_pair: 2,\r\n                name: \"Крис\",\r\n                lastMessage: \"Встала сегодня в 6 утра прикинь...\",\r\n                img: \"https://yt3.ggpht.com/a/AATXAJynSQVjxLr742pi_eZXJxyzjfWLaRcCxgYaeJX_Cg=s900-c-k-c0xffffffff-no-rj-mo\",\r\n                timing: \"1 ч\"\r\n            }\r\n\r\n        ],\r\n        [\r\n\r\n            {\r\n                id: 2,\r\n                id_pair: 3,\r\n                name: \"Сергей\",\r\n                lastMessage: \"Не забывайте подписывать время в тасках\",\r\n                img: \"https://i02.fotocdn.net/s110/defbcd4b451a9263/gallery_xl/2460844912.jpg\",\r\n                timing: \"2 ч\"\r\n            },\r\n            {\r\n                id: 3,\r\n                id_pair: 4,\r\n                name: \"Эдуард\",\r\n                lastMessage: \"Пароль не подошел\",\r\n                img: \"https://pm1.narvii.com/7357/dd8ddd1a25b83dcf20d7036a4656fc47b7aad917r1-1080-1198v2_hq.jpg\",\r\n                timing: \"1 д\"\r\n            },\r\n            {\r\n                id: 7,\r\n                id_pair: 5,\r\n                name: \"Серёжа\",\r\n                lastMessage: \"Привет, у меня вопрос\",\r\n                img: \"https://i0.wp.com/prostolike.net/wp-content/uploads/2018/08/image3_700x669.jpg?w=700&ssl=1\",\r\n                timing: \"2 д\"\r\n            }\r\n        ],\r\n        [\r\n            {\r\n                id: 4,\r\n                id_pair: 6,\r\n                name: \"Вова\",\r\n                lastMessage: \"Выучил реакт за час\",\r\n                img: \"https://cutewallpaper.org/21/grumpy-cat-screensaver/Grumpy-Wallpapers-Wallpaper-Cave.jpg\",\r\n                timing: \"2 ч\"\r\n            },\r\n            {\r\n                id: 5,\r\n                id_pair: 7,\r\n                name: \"Саша\",\r\n                lastMessage: \"Я на 2 этаже куда идти?\",\r\n                img: \"https://ustaliy.ru/wp-content/uploads/2019/03/universe.jpg\",\r\n                timing: \"1 н\"\r\n            },\r\n            {\r\n                id: 6,\r\n                id_pair: 8,\r\n                name: \"Лёша\",\r\n                lastMessage: \"Я в столовой, если что\",\r\n                img: \"https://avatars.mds.yandex.net/get-zen_doc/1886729/pub_5d62dba6998ed600ad85c10e_5d62dbc135c8d800adef2383/scale_1200\",\r\n                timing: \"2 н\"\r\n            }\r\n\r\n        ]\r\n    ];\r\n    getMockedData() {\r\n        return this.dialogData;\r\n    }\r\n\r\n\r\n    handleDialogs(data, url) {\r\n        console.log('to' + data.group_number)\r\n        return fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n    }\r\n\r\n    sendDataPost(data, url) {\r\n        // return new Promise((resolve) => {\r\n        //     setTimeout(() => resolve(\r\n        //         {\r\n        //             status: 1,\r\n        //             name: \"antony\",\r\n        //             image_link:\"https://i0.wp.com/prostolike.net/wp-content/uploads/2018/08/image3_700x669.jpg?w=700&ssl=1\"\r\n        //         }\r\n        //     ), 500)\r\n        // })\r\n        return fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n    }\r\n    sendDataGet(url) {\r\n\r\n        return fetch(url, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            }\r\n        })\r\n    }\r\n    getDialogData() {\r\n        // return new Promise((resolve) => {\r\n        //     setTimeout(() => resolve([]), 500)\r\n        // })\r\n       // return fetch({}'http://185.93.109.221:8000/dialogs')\r\n    }\r\n\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport SabygramService from \"../../../services/SabygramService\";\r\n\r\nimport './auth.scss';\r\n\r\nclass Auth extends Component {\r\n    service = new SabygramService();\r\n\r\n    state = {\r\n        phone: '', \r\n        password: ''\r\n    }\r\n\r\n    renderAuthPage = () => {\r\n        \r\n        return (\r\n            <section className='login-container'>\r\n                <h1 className='login-text'>вход</h1>\r\n                <form className='login-form' onSubmit={this.sendForm}>\r\n                    <div className='tel-wrapper'>\r\n                        <p className=\"number-7\">+7</p>\r\n                        <input type=\"tel\" name=\"phoneNumber\" placeholder='Тел. номер' maxLength=\"10\" pattern=\"\\d*\" required></input>\r\n                    </div>\r\n                    <input type=\"password\" name=\"password\" placeholder='Пароль' maxLength=\"12\" required></input>\r\n                    <button type=\"submit\" className='login-button'><i className=\"fas fa-play\" ></i></button>\r\n                </form>\r\n            </section>\r\n        )\r\n    }\r\n    sendForm = (e) => {\r\n        e.preventDefault();\r\n        const form = e.currentTarget;\r\n        const {setProlifePhoto, setUserName, setWelcomeMessage, setId} = this.props;\r\n        let userInfo = {\r\n            phone: form.phoneNumber.value,\r\n            password: form.password.value\r\n        };\r\n        this.service.sendDataPost(userInfo, '')\r\n        .then((result) => result.json())\r\n        .then((answer) => {\r\n            if(answer.status === 0){\r\n                setUserName(answer.name)\r\n                setWelcomeMessage(answer.welcome_msg)\r\n                setProlifePhoto(answer.image_link)\r\n                setId(answer.id)\r\n                const { history } = this.props;\r\n                history.push('/dialogs');\r\n            }\r\n            if(answer.status === 1) {\r\n                alert(\"Password is incorrect!\")\r\n            }\r\n            if(answer.status === 2) {\r\n                const { history } = this.props;\r\n                history.push('/edit');\r\n            }\r\n        })\r\n        \r\n    }\r\n\r\n    render() {\r\n        return(\r\n            this.renderAuthPage()\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = ({ myUserName, myWelcomeMessage, myProfilePhoto }) => {\r\n    return { \r\n        myUserName, myWelcomeMessage, myProfilePhoto \r\n    }\r\n}\r\n\r\nconst mapDispatchProps = (dispatch) => {\r\n    return {       \r\n        setPhone: (e) => {\r\n            const newPhone = e.target.value;\r\n            dispatch({ type: \"SET_MY_PASSWORD\", payload: newPhone })\r\n        },\r\n        setPassword: (e) => {\r\n            const newPassword = e.target.value;\r\n            dispatch({ type: \"SET_MY_PHONE\", payload: newPassword })\r\n        },\r\n        setId: (id) => {\r\n            dispatch({ type: \"SET_MY_ID\", payload: id })\r\n        },\r\n        setProlifePhoto: (photo) => {\r\n            dispatch({ type: \"SET_MY_PROFILE_PHOTO\", payload: photo })\r\n        },\r\n        setUserName: (name) => {\r\n            dispatch({ type: \"SET_MY_USER_NAME\", payload: name })\r\n        },\r\n        setWelcomeMessage: (message) => {\r\n            dispatch({ type: \"SET_MY_WELCOME_MESSAGE\", payload: message })\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Auth);\r\n","const createPictureBlob = (letter) => {\r\n    const newPhotoSvg = \r\n      `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"74\" height=\"74\" version=\"1.1\">\r\n      <circle cx=\"37\" cy=\"37\" r=\"37\" fill=\"white\"></circle>\r\n    <text x=\"18\" y=\"60\" font-size=\"60\" font-family=\"Roboto, sans-serif\" fill=\"#738DED\">${letter}\r\n          </text>  \r\n    </svg>`\r\n    const blob= new Blob([newPhotoSvg], {type: 'image/svg+xml'}); \r\n    return createReader(blob);\r\n}\r\n\r\nconst readPhoto = (e) => {\r\n    return createReader(e.target.files[0])\r\n}\r\n\r\nconst createReader = (value) => {\r\n    return new Promise((resolve) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(value);\r\n        reader.onload = () => {\r\n            resolve(reader.result)\r\n        }\r\n    })\r\n}\r\nexport{\r\n    createPictureBlob, readPhoto\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { createPictureBlob, readPhoto } from '../../helpers';\r\nimport SabygramService from \"../../../services/SabygramService\";\r\nimport './edit.scss';\r\n\r\nclass Edit extends Component {\r\n  service = new SabygramService();\r\n\r\n  setPhoto = async (e) => {\r\n    const form = e.currentTarget.closest(\"form\");\r\n    const photo = await readPhoto(e);\r\n    this.props.setProfilePhoto(await photo);\r\n    form.pictureUrl.value = await photo\r\n  }\r\n\r\n  setData = async (e) => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    \r\n    if(!this.props.photo) {\r\n      var profilePicSvg = await createPictureBlob(form.username.value[0].toUpperCase());\r\n      form.pictureUrl.value = await profilePicSvg;\r\n    }\r\n\r\n    let userInfo = {\r\n      name: form.username.value,\r\n      welcome_msg: form.message.value || \"Привет всем друзьям!\",\r\n      image_link: form.pictureUrl.value || profilePicSvg\r\n    }\r\n\r\n    this.service.sendDataPost(userInfo, '/edit')\r\n\r\n    this.props.setUserName(userInfo.name);\r\n    this.props.setWelcomeMessage(userInfo.welcome_msg);\r\n    this.props.setProfilePhoto(userInfo.image_link);\r\n\r\n    const { history } = this.props;\r\n    history.push('/dialogs');\r\n  }\r\n\r\n  render() {\r\n    const { photo } = this.props;\r\n\r\n    return (\r\n      <section className='edit-container'>\r\n        <form className='name-form' id=\"editForm\" onSubmit={this.setData}>\r\n          <label htmlFor=\"picture\" id=\"upload-background\" className=\"upload-background\">\r\n\r\n            {photo ? <img src={photo} alt=\"Profile icon\" className=\"profile-photo\"></img> : <div className=\"plus\">+</div>}\r\n            <input type=\"file\" id=\"picture\" accept=\"image/*\" onChange={this.setPhoto}/>\r\n          </label>\r\n\r\n          <input type=\"text\" name=\"pictureUrl\" hidden /> \r\n          \r\n          <p className='photo-label'>Фото</p>\r\n\r\n          <input type=\"text\" name=\"username\" placeholder='Ваше имя' maxLength=\"25\" required />\r\n\r\n          <input type=\"text\" name=\"message\" placeholder='Привет всем друзьям!' maxLength=\"200\" />\r\n\r\n          <button type=\"submit\" className='edit-button' ><i className=\"fas fa-play\"></i></button>\r\n\r\n        </form>\r\n      </section>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ myProfilePhoto, myWelcomeMessage, myUserName }) => {\r\n  return {\r\n    name: myUserName,\r\n    message: myWelcomeMessage,\r\n    photo: myProfilePhoto\r\n  }\r\n}\r\n\r\nconst mapDispatchProps = (dispatch) => {\r\n  return {\r\n    setProfilePhoto: (photo) => dispatch({ type: \"SET_MY_PROFILE_PHOTO\", payload: photo }),\r\n    setUserName: (name) => dispatch({ type: \"SET_MY_USER_NAME\", payload: name }),\r\n    setWelcomeMessage: (message) => dispatch({ type: \"SET_MY_WELCOME_MESSAGE\", payload: message }),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Edit)\r\n\r\n","import React from 'react';\r\nimport './chatMenu.scss';\r\nimport SabygramService from '../../services/SabygramService';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nconst ChatMenu = ({ display, groupId, id, margin, id_pair, onUpdate }) => {\r\n\r\n  const service = new SabygramService();\r\n  const history = useHistory();\r\n  const handleClick = () => {\r\n    history.push(`/dialogs`);\r\n    onUpdate();\r\n  }\r\n  const onHandleClicked = (id, group_number) => {\r\n    service.handleDialogs({\r\n      status: 0,\r\n      user_id: id,\r\n      id_pair,\r\n      group_number: group_number\r\n    }, '/dialogs')\r\n    handleClick()\r\n  }\r\n\r\n\r\n  if (display === \"block\") {\r\n    switch (groupId) {\r\n      case 0:\r\n        {\r\n\r\n          return (\r\n            <ul className='settings' style={{ display: `${display}`, marginTop: `${margin}` }}>\r\n              <li onClick={function () { onHandleClicked(id, 2) }}>Сделать тихим</li>\r\n              <li onClick={function () { onHandleClicked(id, 1) }}>Сделать гроким</li>\r\n              <li>Удалить</li>\r\n            </ul>\r\n          )\r\n        }\r\n      case 1:\r\n        {\r\n          return (\r\n            <ul className='settings' style={{ display: `${display}`, marginTop: `${margin}` }}>\r\n              <li onClick={function () { onHandleClicked(id, 0) }}>Сделать общим</li>\r\n              <li onClick={function () { onHandleClicked(id, 2) }}>Сделать тихим</li>\r\n              <li>Удалить</li>\r\n            </ul>\r\n          )\r\n        }\r\n      case 2:\r\n        {\r\n          return (\r\n            <ul className='settings' style={{ display: `${display}`, marginTop: `${margin}` }}>\r\n              <li onClick={function () { onHandleClicked(id, 0) }}>Сделать общим</li>\r\n              <li onClick={function () { onHandleClicked(id, 1) }}>Сделать гроким</li>\r\n              <li>Удалить</li>\r\n            </ul>\r\n          )\r\n        }\r\n\r\n      default: return (<div>ups...</div>)\r\n    }\r\n  }\r\n  return (\r\n    <p></p>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nexport default ChatMenu;","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport './dialogItem.scss';\r\nimport ChatMenu from '../chatMenu/chatMenu';\r\n\r\nclass DialogItem extends Component {\r\n\r\n\r\n    state = {\r\n        display: \"none\",\r\n        messagesUnread: 0,\r\n        lastMessage: null\r\n    }\r\n\r\n    timer = null\r\n\r\n    componentDidMount = () => {\r\n        document.getElementById('root').addEventListener('click', () => {\r\n            this.setState({\r\n                display: \"none\"\r\n            })\r\n        })\r\n        const socket = new WebSocket(\"ws://\" + window.location.host + `/ws/room/${this.props.dialog.id_pair}/`)\r\n        socket.onopen = () => {\r\n            console.log(\"Соединение установлено. \" + this.props.dialog.id_pair);\r\n        };\r\n        socket.onclose = () => {\r\n            console.log(\"Соединение закрыто. \" + this.props.dialog.id_pair);\r\n        };\r\n        socket.onmessage = (event) => {\r\n            console.log(\"Данные получены: \" + event.data + \" \" + this.props.dialog.id_pair);\r\n            const data = JSON.parse(event.data);\r\n\r\n            if (data.user_id.toString() !== this.props.myId.toString()) {\r\n                this.setState({\r\n                    messagesUnread: this.state.messagesUnread + 1,\r\n                    lastMessage: data.message\r\n                })\r\n            }\r\n        }\r\n\r\n        this.props.addSocket({ id: this.props.dialog.id_pair, socket })\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onHistoryPush = this.onHistoryPush.bind(this);\r\n    }\r\n\r\n    touchend = () => {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n            this.timer = null\r\n        }\r\n    }\r\n\r\n    touchstart = () => {\r\n        if (!this.timer) {\r\n            this.timer = setTimeout(() => {\r\n                this.setState({\r\n                    display: \"block\"\r\n                })\r\n\r\n            }, 500);\r\n        }\r\n    };\r\n    onHistoryPush = () => {\r\n        const { dialog: { name, img, id, id_pair }, groupId } = this.props;\r\n        this.props.history.push({\r\n            pathname: `/chatapp/${id_pair}`,\r\n            state: {\r\n                id: id,\r\n                name: name,\r\n                img: img,\r\n                groupId: groupId,\r\n                id_pair: id_pair,\r\n            }\r\n        }\r\n        );\r\n    }\r\n\r\n    handleClick = () => {\r\n        if (this.state.display !== 'block') {\r\n            this.onHistoryPush();\r\n        }\r\n\r\n    };\r\n    render() {\r\n        const { dialog: { name, lastMessage, img, id_pair, timing, id }, groupId, onUpdate } = this.props\r\n        let time = timing\r\n        time = timing.toString().split(' ')[1].split(':')[0] + ':' + timing.toString().split(' ')[1].split(':')[1]\r\n        let clazz = \"\";\r\n\r\n        switch (groupId) {\r\n            case 0:\r\n                clazz = \"dialog-notification common-dialog\";\r\n                break\r\n            case 1:\r\n                clazz = \"dialog-notification loud-dialog\";\r\n                break\r\n            case 2:\r\n                clazz = \"dialog-notification silent-dialog\";\r\n                break\r\n            default:\r\n                clazz = \"dialog-notification\";\r\n        }\r\n        return (\r\n\r\n            <div className=\"dialog\" onTouchStart={this.touchstart} onTouchEnd={this.touchend} onMouseDown={this.touchstart} onMouseUp={this.touchend} onClick={this.handleClick}>\r\n                <img src={img ? img : 'https://media.istockphoto.com/photos/smiling-man-portrait-made-of-vegetables-and-fruits-picture-id466161171'} alt=\"dialogPicture\" className=\"dialog-img\" />\r\n                <div className=\"dialog-contain\" >\r\n                    <p className=\"dialog-name\">{name}</p>\r\n                    <p className=\"dialog-message\">{this.state.lastMessage || lastMessage}</p>\r\n                </div>\r\n                <div className=\"dialog-timeNot\">\r\n                    <p className=\"dialog-timing\">{time}</p>\r\n                    {\r\n                        this.state.messagesUnread !== 0 ? <p className={clazz}>{this.state.messagesUnread}</p> : <></>\r\n                    }\r\n\r\n                </div>\r\n                <ChatMenu groupId={groupId} display={this.state.display} id_pair={id_pair} id={id} margin={\"55px\"} onUpdate={onUpdate} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = ({ myId }) => {\r\n    return {\r\n        myId\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addSocket: (socketInfo) => dispatch({ type: \"ADD_SOCKET\", payload: socketInfo })\r\n    }\r\n}\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(DialogItem));\r\n","import Header from './header';\r\nexport default Header;","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './header.scss';\r\n\r\nconst Header = ({ groupId, onSearch, dialogs, onSettings }) => {\r\n    const [inputVisible, setVisibility] = useState(false);\r\n\r\n    let groupName = null;\r\n\r\n    switch (groupId) {\r\n        case 0:\r\n            groupName = \"Общие\";\r\n            break;\r\n        case 1:\r\n            groupName = \"Громкие\";\r\n            break;\r\n        case 2:\r\n            groupName = \"Тихие\";\r\n            break;\r\n        case \"all\":\r\n            groupName = \"Контакты\";\r\n            break;\r\n        default:\r\n            groupName = null;\r\n    }\r\n\r\n    const handleSearch = () => {\r\n        inputVisible === false ? setVisibility(true) : setVisibility(false)\r\n    }\r\n\r\n    const searchDialogs = (e) => {\r\n        let dialogsFound = [];\r\n\r\n        if(groupId === \"all\"){\r\n            dialogs.forEach((dialogGroup) => {\r\n                dialogGroup.forEach((dialog) => {\r\n                    if (dialog.name.toLowerCase().includes(e.target.value.toLowerCase()))\r\n                    dialogsFound.push(dialog)\r\n                    })\r\n                })\r\n            }\r\n        else {\r\n            dialogs[groupId].forEach((dialog) => {\r\n            if (dialog.name.toLowerCase().includes(e.target.value.toLowerCase()))\r\n                dialogsFound.push(dialog)\r\n            })\r\n        }\r\n        onSearch(dialogsFound)\r\n    }\r\n\r\n    const clearDialogs = (e) => {\r\n        onSearch(null);\r\n        setVisibility(false);\r\n        e.target.value = null\r\n    }\r\n\r\n    return (\r\n        <header className=\"dialogs-header\">\r\n            {groupName && <i className=\"fa fa-bars\" aria-hidden=\"true\" onClick={onSettings}></i>}\r\n            {groupName && <Link to=\"/dialogs\"><i className=\"fa fa-users\" aria-hidden=\"true\" ></i></Link>}\r\n            <div className=\"group-name\">{ groupName }</div>\r\n            <input type=\"text\" className=\"dialogs-search\" onInput={searchDialogs} onBlur={clearDialogs} hidden={!inputVisible} autoFocus={true}></input>\r\n            {groupName &&  <i className=\"fa fa-search\" aria-hidden=\"true\" onClick={handleSearch}></i> }\r\n        </header>\r\n    )\r\n}\r\nexport default Header;","import React, { Component } from 'react';\r\nimport SabygramService from '../../services/SabygramService';\r\nimport './addContact.scss';\r\n\r\nexport default class AddContact extends Component {\r\nservice = new SabygramService();\r\n  state = {\r\n    placeholder: 'Добавить контакт',\r\n    resultHidden: true,\r\n    defaultValue: null,\r\n    result: {},\r\n    loading: false\r\n  }\r\n\r\n  changePlaceholderFocus = () => {\r\n    this.setState({\r\n      placeholder: 'Номер телефона',\r\n      defaultValue: \"+7\"\r\n    })\r\n  }\r\n\r\n  changePlaceholderBlur = () => {\r\n    this.setState({\r\n      placeholder: 'Добавить контакт',\r\n      defaultValue: null\r\n    })\r\n  }\r\n\r\n  changePhone = (e) => {\r\n    if(e.target.value.length === 12){\r\n      this.setState({\r\n        loading: true\r\n      })\r\n      this.service.sendDataPost({status: 1, phone: e.target.value.slice(2)}, '/contacts')\r\n      .then((result) => result.json())\r\n      .then((result) => {\r\n        this.setState({\r\n          result,\r\n          resultHidden: false,\r\n          loading: false\r\n        })   \r\n      })\r\n    }   \r\n  }\r\n  addContact = (e) => {\r\n    this.service.sendDataPost({status: 2, user2_id: this.state.result.id}, '/contacts')\r\n    .then((result) => result.json())\r\n    .then((result) => {\r\n      if(result.dialog_id !== undefined){\r\n        alert(\"Пользователь добавлен в список контактов!\")\r\n      }\r\n    })\r\n  }\r\n  renderResult() {\r\n    if(this.state.result.status === 1){\r\n      return (\r\n        <>\r\n          <img src={this.state.result.image_link} alt=\"avatar\"></img>\r\n            <span>{this.state.result.name}</span>\r\n            <i className=\"fa fa-plus-circle\" aria-hidden=\"true\" onClick={this.addContact}></i>\r\n        </>\r\n      )\r\n    }\r\n    if(this.state.result.status === 0) {\r\n      return (\r\n        <p>Не найдено</p>\r\n      )\r\n    }\r\n    if(this.state.loading) {\r\n      return (\r\n        <p>Идёт поиск...</p>\r\n      )\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <form className='add-contact-form'>\r\n        <input type=\"tel\" className='add-contact' placeholder={this.state.placeholder} onFocus={this.changePlaceholderFocus} onBlur={this.changePlaceholderBlur} onChange={this.changePhone} maxLength=\"12\" defaultValue={this.state.defaultValue}/>        \r\n          <div className='add-contact-result-container' hidden={this.state.resultHidden}>\r\n            <div className=\"add-contact-result\">\r\n              {this.renderResult()}\r\n            </div>   \r\n          </div>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACySURBVHgB7ZOhDsJADECvBIXeNBo+AjQWPoKvmIIEjSMBh95HgMZjmZ8Fe7xmXZiCa4Jck5fbenm9XtKT4IgY44xlZb8bEaldMpwgt+89ZJIq28kvuHFyabnF0CFv4QkFOd26hM91vratread3Ah2cLTi6bLlM8v38j/lcTthbpkYwCQ0A7LsyiwFlEzd9VeBKZyhRlx7ZA0d5bb1CrTdORxSZA3Re4bmkTysSIV8D4nxBulz6F4h5s8kAAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { readPhoto } from '../../helpers';\r\nimport { Link } from 'react-router-dom';\r\nimport SabygramService from \"../../../services/SabygramService\";\r\nimport './settingPage.scss';\r\n\r\n\r\nimport contactsImg from '../../../img/1.png';\r\nimport cinemaImg from '../../../img/2.png';\r\nimport pencilImg from '../../../img/3.png';\r\nconst service = new SabygramService();\r\n\r\nconst SettingPage = ({ myUserName, myWelcomeMessage, myProfilePhoto, setProfilePhoto, setUserName, setWelcomeMessage, clearState }) => {\r\n    \r\n    const setPhoto = async (e) => {\r\n        const form = e.currentTarget.closest(\"form\");\r\n        const photo = await readPhoto(e);\r\n        setProfilePhoto(await photo);\r\n        form.pictureUrl.value = await photo\r\n    }\r\n\r\n    const setData = async (e) => {\r\n        e.preventDefault();\r\n        const form = e.currentTarget;\r\n\r\n        let userInfo = {\r\n            status: 1,\r\n            name: form.username.value,\r\n            welcome_msg: form.message.value,\r\n            image_link: form.pictureUrl.value\r\n        }\r\n        \r\n        console.log(\"name\" + userInfo.name);\r\n        console.log(\"welcome_msg\" + userInfo.welcome_msg);\r\n        console.log(\"image_link\" + userInfo.image_link);\r\n\r\n        service.sendDataPost(userInfo, '/dialogs')\r\n\r\n        setUserName(userInfo.name);\r\n        setWelcomeMessage(userInfo.welcome_msg);\r\n        //this.props.setProfilePhoto(userInfo.image_link);   \r\n    }\r\n    const handleExit = () => {\r\n        service.sendDataPost({status:99}, '/dialogs');\r\n        clearState();\r\n    }\r\n    const renderForm = () => {\r\n        return (\r\n            <>\r\n                <form name=\"profileInfo\" className=\"profileInfo\" onSubmit={setData}>\r\n                    <label htmlFor=\"picture\" id=\"upload-background\" className=\"upload-background-profile\">\r\n                        <img src={myProfilePhoto} alt=\"Profile icon\" className=\"photo-settings\" />\r\n                        <input className=\"profile-photo-settings\" type=\"file\" id=\"picture\" accept=\"image/*\" onChange={setPhoto} />\r\n                    </label>\r\n                    <input type=\"text\" name=\"pictureUrl\" hidden></input>\r\n\r\n                    <label>\r\n                        <input type=\"text\" className=\"username-field\" name=\"username\" defaultValue={myUserName} maxLength=\"25\" />\r\n                        <img src={pencilImg} alt=\"edit\" className=\"settings-pencil\"></img>\r\n                    </label>\r\n                    <label>\r\n                        <input type=\"text\" className=\"message-field\" name=\"message\" defaultValue={myWelcomeMessage} maxLength=\"200\" />\r\n                        <img src={pencilImg} alt=\"edit\" className=\"settings-pencil\"></img>\r\n                    </label>\r\n                    <button type=\"submit\" className=\"profileInfo-button\">Сохранить</button>\r\n                    <Link to=\"/\" className=\"profileInfo-button exit-button\" onClick={handleExit}>Выйти</Link>\r\n\r\n                </form>\r\n                <span className=\"saby-gramm\">SABYgramm ©</span>\r\n            </>\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"setting-page\">\r\n            {renderLinks()}\r\n            {renderForm()}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst renderLinks = () => {\r\n    return (\r\n        <div className=\"link-controllers \">\r\n            <Link to=\"/contacts\" className=\"left-controller\">\r\n                <div className=\"link-contain\">\r\n                    <div className=\"icon\">\r\n                        <img src={contactsImg} alt=\"Контакты\" />\r\n                    </div>\r\n                    <p>Контакты</p>\r\n                </div>\r\n            </Link>\r\n            <Link to=\"/cinema\">\r\n                <div className=\"link-contain\">\r\n                    <div className=\"icon\">\r\n                        <img src={cinemaImg} alt=\"Кинотеатр\" />\r\n                    </div>\r\n                    <p>Кинотеатр</p>\r\n                </div>\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ myUserName, myWelcomeMessage, myProfilePhoto }) => {\r\n    return {\r\n        // data: ownProps.data,\r\n        myUserName,\r\n        myWelcomeMessage,\r\n        myProfilePhoto\r\n    }\r\n}\r\n\r\nconst mapDispatchProps = (dispatch) => {\r\n    return {\r\n        setProfilePhoto: (photo) => dispatch({ type: \"SET_MY_PROFILE_PHOTO\", payload: photo }),\r\n        setUserName: (name) => dispatch({ type: \"SET_MY_USER_NAME\", payload: name }),\r\n        setWelcomeMessage: (message) => dispatch({ type: \"SET_MY_WELCOME_MESSAGE\", payload: message }),\r\n        clearState: () => dispatch({ type: \"CLEAR_STATE\" })\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchProps)(SettingPage);","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO6SURBVHgB1Vn9ddMwEL/k8T9hgqoTNJ0AMwHZgGyQbJB0AsIEoRMAEzhMkDKBnQlcJhBWclfLsj7ubKfA7z1Xrk6n+9JJZwXgCtBar+on1xdU+K7gf0Ct6F6HsYbXRC0wQ+9VqIB5X0bGb3Bcgbwz4/n62VpGzMeSl1J+E/HkJsBTIH3hoe2QthtLXkz5pcW8RU+aZ231Zw6Pwv4qMGeG9OMY8lIG5Mi09tBoOeQBAwqIG5CPIS9lAGHmoc1CntbN2s08tD3S9mPJixlQMSbUHhp5q9CYfDj+s6WkGktezIAcebYe2ioW0rr/qw5jPba8kAGZLVQ3SbWx+pcRfpOURxxHB1l2LXmhSbc6jC2MjKvIQ0/mXE8OxWvLc4VTyKuIJwt92Y0U/EvQlzOg0HwUVzPC8mSRUGBu8dDYo47XOnPdJHdh9a8Y8vZJo4WeXCLPwhIyA56DCuRZYN83nshE5HTbk1nMUOudijR2qaybGmdP82l+5PLQoEziSYsvR75MwENR+y7gMZHrlCpTawx54MdkMnkGPhS2Ep4nbO+4DKjTI/77Eq2pR5ESZFAo4InLUI8tiVcSbWh0U9RhG3DjDErCWrds5T3KvAU+KMqKOnwRkCyFWQ8eAhl9z2d54SFnew2QeJMi8AvkODlyOShdnrMBuA7N89wzgUuQo3TmSAJ1M8+Mcmc6UBHaRYbkgAIZWnngGiBdy2PkAHsrdfiU+eMaIF3L5xyQbKEWOjsKE63cGbqEzkrofpdPi54yS2yV+UMGiM8AxAO2e2ktZHjw30eQwZsDhPcgQL10dnVD9YzkRFXYmrJlCzJ0Dz7d/qg+F3TAxMBijn3ToLtl/tIdsHYGsTxqVYgKmNCJa8gAD6GKLlfLiBvGpHOpIhZvJZATvLacRvjeQRoK2z7b6AHbD4yxwfPGZ0DpMMVAtdBPkOPkzBGDyABJkUW71pAIcE5iMuC3S3gDw0DeMx/l1FfWz71bFGKSH6EbWUkEOrkWW0IK0vDVQAqaU9bGHPzLklNHKWxPLmEKA1B7+XZioe76giSfV6nvYdLGLQxALALJ7c2DVqXoYEjprbAtXUKvCOjLDxaF57A7YHvHVQL3+Pjh1JQPom1UQRhzpLeWCt42GCGt2wZ8D5XeZh5D/whh9DoHFPSYMMAfu73wjWfL65vEwW0Nmo8iOzr0foKR5XXOAbMMcE8/1x8QQT3Wp5Dx8idoG6CwPYwtLxSBEtIoE/12Iqd2oBL6yxsXVuXog+Sj5+9B+39jYH8kSfAH59pcMpQFQ70AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,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\"","import SettingPage from './settingPage';\r\n\r\nexport default SettingPage;","import React, { Component } from 'react';\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport DialogItem from '../../dialogItem/dialogItem';\r\nimport SabygramService from '../../../services/SabygramService';\r\nimport Header from '../../header';\r\nimport './dialogs.scss';\r\nimport AddContact from '../../addContact/addContact';\r\nimport SettingPage from '../settingPage';\r\n\r\n\r\nexport default class Dialogs extends Component {\r\n    service = new SabygramService();\r\n\r\n    state = {\r\n        slideGroup: 0,\r\n        itemsFound: null,\r\n        dialogs: [],\r\n        update: false\r\n    }\r\n\r\n    onUpdate = () => {\r\n        this.setState({ update: true })\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.state.update) {\r\n            this.service.sendDataGet('/dialogs')\r\n                .then((dialogs) => dialogs.json())\r\n                .then((result) => {\r\n                    this.setState({ dialogs: result });\r\n                })\r\n            this.setState({ update: false })\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.updateDialogs();\r\n    }\r\n\r\n    updateDialogs() {\r\n        this.service.sendDataGet('/dialogs')\r\n            .then((dialogs) => dialogs.json())\r\n            .then((result) => {\r\n                this.setState({ dialogs: result });\r\n            })\r\n\r\n\r\n        // let result = this.service.getMockedData();\r\n        // this.setState({ dialogs: result });\r\n\r\n    }\r\n\r\n\r\n    slideSettings = () => {\r\n        var mySwiper = document.querySelector('.swiper-container').swiper\r\n        mySwiper.slideTo(0);\r\n    }\r\n\r\n    slideChanged = (e) => {\r\n        if (e) {\r\n            this.setState({\r\n                slideGroup: e.activeIndex - 1\r\n            })\r\n        }\r\n    }\r\n\r\n    renderSearchItems = (dialogs) => {\r\n        this.setState({\r\n            itemsFound: dialogs\r\n        })\r\n    }\r\n\r\n    addContact = () => {\r\n        if (this.state.dialogs[0]\r\n            && this.state.dialogs[0].length === 0\r\n            && this.state.dialogs[1].length === 0\r\n            && this.state.dialogs[2].length === 0\r\n        ) {\r\n            return (<AddContact />)\r\n        }\r\n    }\r\n\r\n    renderDialog = (dialogs, itemsFound = null, groupId = null, onUpdate) => {\r\n\r\n        let toSearchIn = null;\r\n\r\n        itemsFound ? toSearchIn = itemsFound : toSearchIn = dialogs;\r\n\r\n        if (dialogs)\r\n            return (\r\n                <div>\r\n                    {\r\n                        toSearchIn.map((dialog) => {\r\n                            return <DialogItem key={dialog.id_pair} dialog={dialog} groupId={groupId} onUpdate={onUpdate} />\r\n                        })\r\n                    }\r\n                </div>\r\n            )\r\n        else return <div></div>\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Swiper className=\"mySwiper\" initialSlide=\"1\" onSlideChange={this.slideChanged}>\r\n                <Header slot=\"container-start\" groupId={this.state.slideGroup} onSearch={this.renderSearchItems} dialogs={this.state.dialogs} onSettings={this.slideSettings} />\r\n                <div className=\"dialog-container\">\r\n                    <SwiperSlide>\r\n                        <SettingPage />\r\n                    </SwiperSlide>\r\n\r\n                    <SwiperSlide>\r\n                        {this.addContact()}\r\n                        {this.renderDialog(this.state.dialogs[0], this.state.itemsFound, 0, this.onUpdate)}\r\n                    </SwiperSlide>\r\n\r\n                    <SwiperSlide>\r\n                        {this.addContact()}\r\n                        {this.renderDialog(this.state.dialogs[1], this.state.itemsFound, 1, this.onUpdate)}\r\n                    </SwiperSlide>\r\n\r\n                    <SwiperSlide>\r\n                        {this.addContact()}\r\n                        {this.renderDialog(this.state.dialogs[2], this.state.itemsFound, 2, this.onUpdate)}\r\n                    </SwiperSlide>\r\n                </div>\r\n            </Swiper>\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPaperPlane, faSmile } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Picker from \"emoji-picker-react\";\r\n\r\n/**\r\n * This renders the form to send a new message.\r\n */\r\nconst MsgForm = (props) => {\r\n    const input = props.msgInput.current;\r\n    \r\n\r\n\r\n    /** This functions handles the submission of the new message form */\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        /* We ensure the message is not empty, and trim any extra space\r\n         * before sending */\r\n        // let trimmedMsg = props.savedMsg.trim();\r\n        const message = event.target.message.value;\r\n        const { sendSocketMessage } = props;\r\n        sendSocketMessage(message);\r\n\r\n        if (message.length > 0) {\r\n            props.addNewMessage(message, \"outgoing\")\r\n            event.target.message.value = \"\";\r\n            // !props.editMode\r\n                // ? props.addNewMessage(message, \"outgoing\")\r\n                // : props.updateMessage(trimmedMsg);\r\n        }\r\n        // if (!props.editMode) {\r\n        //     let phrase = \"\";\r\n        //     const generatedPhrase = async () => {\r\n        //         setTimeout(async () => {\r\n        //             const result = await generatePhrase();\r\n        //             phrase = result;\r\n        //             props.addNewMessage(phrase, \"incoming\");\r\n        //         }, 2000);\r\n        //     };\r\n        //     const generatePhrase = () => {\r\n        //         return 'Какой-то текст'\r\n        //     };\r\n        //     generatedPhrase();\r\n        // }\r\n\r\n    };\r\n\r\n    /** Update the saved message when the input changes */\r\n    // const handleChange = (event) => {\r\n    //     props.setSavedMsg(event.currentTarget.value);\r\n    // };\r\n\r\n    /** This state defines if the emoji picker is visible or not */\r\n    const [displayEmojis, setDisplayEmojis] = useState(false);\r\n\r\n    /**\r\n     * This function handles displaying or hiding the emoji picker on click\r\n     * @param {onClick} event\r\n     */\r\n    const handleDisplayPicker = (event) => {\r\n        event.preventDefault();\r\n        setDisplayEmojis(!displayEmojis);\r\n    };\r\n\r\n    /** Edit the latest message when up arrow is pressed */\r\n    // const handleKeyPress = (event) => {\r\n    //     if (\r\n    //         event.keyCode === 38 &&\r\n    //         props.lastMessageIndex >= 0 &&\r\n    //         props.editMode === false\r\n    //     ) {\r\n    //         // Find the index of the latest outgoing message\r\n    //         let testIndex = props.lastMessageIndex;\r\n    //         while (props.currentMessages[testIndex].direction === \"incoming\") {\r\n    //             testIndex--;\r\n    //         }\r\n    //         input.blur();\r\n    //         setTimeout(() => {\r\n    //             props.enterEditMode(testIndex);\r\n    //         }, 0);\r\n    //     }\r\n    // };\r\n    /**\r\n     * Adds an emoji in the string of the input, at the curor's current position\r\n     * Browser focus then returns to the text input and places the cursor after the\r\n     * emoji\r\n     */\r\n    const onEmojiClick = (event, emojiObject) => {\r\n        setDisplayEmojis(false);\r\n        const cursorPosition = input.selectionStart;\r\n        const selectionLength = input.selectionEnd - input.selectionStart;\r\n        const textArray = input.value.split(\"\");\r\n        textArray.splice(cursorPosition, selectionLength, emojiObject.emoji);\r\n        const newText = textArray.join(\"\");\r\n        props.setSavedMsg(newText);\r\n\r\n        input.focus();\r\n        input.selectionStart = input.selectionEnd = cursorPosition + 1;\r\n    };\r\n\r\n    return (\r\n        <form\r\n            className={\r\n                props.editMode ? \"message-form editing-input\" : \"message-form\"\r\n            }\r\n            onSubmit={handleSubmit}\r\n            key={\"MessageForm\"}\r\n        >\r\n            <div className={displayEmojis ? \"emoji-picker\" : \"hidden\"}>\r\n                <Picker disableAutoFocus={true} onEmojiClick={onEmojiClick} />\r\n            </div>\r\n            <button\r\n                type=\"button\"\r\n                className=\"open-emojis\"\r\n                onClick={handleDisplayPicker}\r\n            >\r\n                <FontAwesomeIcon icon={faSmile} />\r\n            </button>\r\n            <input name=\"message\"\r\n                id=\"message-input\"\r\n                type=\"text\"\r\n                ref={props.msgInput}\r\n                className=\"message-input\"\r\n                placeholder=\"Message\"\r\n                autoComplete=\"off\"\r\n                // onChange={handleChange}\r\n                //value={props.savedMsg || \"\"}\r\n                // onKeyDown={handleKeyPress}\r\n            />\r\n            <button type=\"submit\" className=\"send-message\">\r\n                <span className=\"sr-only\">send</span>\r\n                <FontAwesomeIcon icon={faPaperPlane} />\r\n            </button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default MsgForm;\r\n","import React from \"react\";\n\nconst Message = (props) => {\n    const handleClick = () => props.enterEditMode(props.index);\n    const formatTime = (time) => {\n        return time.toString().split(' ')[1].split(':')[0] + ':' + time.toString().split(' ')[1].split(':')[1]\n    }\n    return (\n        <>\n            {props.message.direction === \"outgoing\" ? (\n                <div className=\"outgoing\">\n                    <button\n                        className={\n                            props.editMode && props.index === props.editIndex\n                                ? \"message editing\"\n                                : \"message\"\n                        }\n                        onClick={handleClick}\n                    >\n                        {props.message.message}\n                        <p className=\"msg-date\">\n                            {props.message.edit\n                                ? \"ред. \" + formatTime(props.message.edit)\n                                : formatTime(props.message.time)}\n                        </p>\n                    </button>\n\n                </div>\n            ) : (\n                <div className=\"incoming\">\n                    <div className=\"message\">{props.message.message}\n                        <p className=\"msg-date\">\n                            {props.message.edit\n                                ? \"ред. \" + formatTime(props.message.edit)\n                                : formatTime(props.message.time)}\n                        </p></div>\n\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default Message;\n","import React, { useEffect, useRef } from \"react\";\r\n\r\nimport MsgForm from \"../msgForm\";\r\nimport Message from \"../message\";\r\n\r\n/**\r\n * This renders the entire chat window, including the list of messages and the\r\n * input for new messages.\r\n */\r\nconst ChatWindow = (props) => {\r\n    const currentFriend = props.messages.name;\r\n    const currentMessages = props.messages.messages;\r\n    const messageList = useRef(null);\r\n\r\n    /**\r\n     * This effect ensures the pages scrolls to the bottom of the page if the\r\n     * height of the message list is longer than the height of its container\r\n     */\r\n    useEffect(() => {\r\n        if (messageList) {\r\n            messageList.current.addEventListener(\"DOMNodeInserted\", (event) => {\r\n                const { currentTarget: target } = event;\r\n                target.scroll({ top: target.scrollHeight });\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"chat-window\">\r\n            <ul className=\"message-list\" ref={messageList}>\r\n                {currentMessages.length !== 0\r\n                    ? currentMessages.map((message, index) => (\r\n                        <div className='margin'>\r\n                            <li key={index}>\r\n                                <Message\r\n                                    message={message}\r\n                                    enterEditMode={props.enterEditMode}\r\n                                    index={index}\r\n                                    editMode={props.editMode}\r\n                                    editIndex={props.editIndex}\r\n                                />\r\n                            </li>\r\n                        </div>\r\n                    ))\r\n                    : null}\r\n\r\n\r\n            </ul>\r\n\r\n            {currentMessages.length === 0 ? (\r\n                <p className=\"no-message\">\r\n                    This is the beginning of your conversation with{\" \"}\r\n                    {currentFriend}\r\n                </p>\r\n            ) : null}\r\n\r\n            <MsgForm\r\n                addNewMessage={props.addNewMessage}\r\n                updateSaved={props.updateSaved}\r\n                setSavedMsg={props.setSavedMsg}\r\n                savedMsg={props.savedMsg}\r\n                currentMessages={currentMessages}\r\n                updateMessage={props.updateMessage}\r\n                editMode={props.editMode}\r\n                setEditMode={props.setEditMode}\r\n                editIndex={props.editIndex}\r\n                enterEditMode={props.enterEditMode}\r\n                lastMessageIndex={currentMessages.length - 1}\r\n                msgInput={props.msgInput}\r\n                sendSocketMessage={props.sendSocketMessage}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatWindow;\r\n","import Header from './header';\r\nexport default Header;","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ChatMenu from '../chatMenu/chatMenu';\r\nimport './header.scss';\r\n\r\nconst MsgHeader = ({ groupId, name, img, id }) => {\r\n    const [dotsClicked, dotsClick] = useState(\"none\");\r\n\r\n\r\n    let groupName = null;\r\n    const history = useHistory();\r\n    const handleClick = () => history.push(`/dialogs`);\r\n    const onDotsClick = () => {\r\n        if (dotsClicked === 'block') {\r\n            dotsClick('none')\r\n        }\r\n        else dotsClick('block')\r\n    }\r\n    switch (groupId) {\r\n        case 0:\r\n            groupName = \"Общие\";\r\n            break;\r\n        case 1:\r\n            groupName = \"Громкие\";\r\n            break;\r\n        case 2:\r\n            groupName = \"Тихие\";\r\n            break;\r\n        default:\r\n            groupName = null;\r\n    }\r\n\r\n    return (\r\n        <header className=\"message-header\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"22\" viewBox=\"0 0 32 24\" fill=\"none\" onClick={handleClick}>\r\n                <path d=\"M0.939339 10.9393C0.353552 11.5251 0.353552 12.4749 0.939339 13.0607L10.4853 22.6066C11.0711 23.1924 12.0208 23.1924 12.6066 22.6066C13.1924 22.0208 13.1924 21.0711 12.6066 20.4853L4.12132 12L12.6066 3.51472C13.1924 2.92893 13.1924 1.97919 12.6066 1.3934C12.0208 0.807614 11.0711 0.807613 10.4853 1.3934L0.939339 10.9393ZM32 10.5L2 10.5L2 13.5L32 13.5L32 10.5Z\" fill=\"white\" />\r\n            </svg>\r\n            <img src={img ? img : 'https://media.istockphoto.com/photos/smiling-man-portrait-made-of-vegetables-and-fruits-picture-id466161171'} alt=\"dialogPicture\" className=\"message-dialog-img\" />\r\n            <div className='flex-names'>\r\n                <div className='user-name'>{name}</div>\r\n                <div className=\"group-name\">{groupName}</div>\r\n            </div>\r\n            <i className=\"fas fa-ellipsis-v\" onClick={onDotsClick}></i>\r\n\r\n            <ChatMenu display={dotsClicked} groupId={groupId} id={id} margin={\"85px\"} />\r\n        </header>\r\n    )\r\n}\r\nexport default MsgHeader;","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport ChatWindow from \"../chatWindow\";\r\nimport './chatApp.scss';\r\nimport MsgHeader from \"../msgHeader\";\r\nimport SabygramService from \"../../services/SabygramService\";\r\n\r\n\r\n/**\r\n * The chat application\r\n */\r\nconst service = new SabygramService();\r\nconst ChatApp = (props) => {\r\n\r\n    const location = useLocation();\r\n\r\n    if (location.state) {\r\n        var { groupId, name, img, id_pair, id, } = location.state\r\n    }\r\n    else {\r\n        groupId = 0;\r\n        name = 'Vasya';\r\n        img = 'https://i1.sndcdn.com/artworks-000094489636-qzznk3-t500x500.jpg';\r\n        id_pair = 100;\r\n    }\r\n\r\n\r\n    /**\r\n     * The currentConv state determines the conversation currently rendered\r\n     */\r\n    const [currentConv] = useState(\"0\");\r\n    //индекс диалога в группе\r\n\r\n    /** The editMode state defines if a message is being edited or not */\r\n    const [editMode, setEditMode] = useState(false);\r\n\r\n    /** editIndex holds the index of the message currently being edited */\r\n    const [editIndex, setEditIndex] = useState(null);\r\n\r\n    const msgInput = useRef();\r\n\r\n\r\n    /**\r\n     * The data object holds all friends and their related messages\r\n     */\r\n    const [data, setData] = useState({\r\n        0: {\r\n            name: name, messages: [],\r\n            saved: \"\", editMode: false, groupId: groupId, img: img\r\n        }\r\n    });\r\n    //поменять индексы и должно работать, но не могу с сервиса забрать в пропс сразу\r\n\r\n    /**\r\n     * The savedMsg state hold the text currently displayed in the message input\r\n     */\r\n    const [savedMsg, setSavedMsg] = useState(\"\");\r\n\r\n    /**\r\n     * Add a message to the current conversation\r\n     * @param {string} newMessage\r\n     * @param {string} direction\r\n     */\r\n    const addNewMessage = (newMessage, direction, time = new Date().toLocaleString()) => {\r\n        const selectedConv = data[currentConv];\r\n        selectedConv.messages.push({\r\n            message: newMessage,\r\n            time: time,\r\n            direction: direction,\r\n        });\r\n\r\n        const updatedData = { ...data };\r\n        updatedData[currentConv] = selectedConv;\r\n        setData(updatedData);\r\n\r\n    };\r\n\r\n    const socketFound = props.sockets.find((socket) => socket.id === id_pair);\r\n    const socket = socketFound.socket;\r\n\r\n    useEffect(() => {\r\n        service.sendDataPost({ id_pair, status: 2, my_id: props.myId }, `/dialogs`)\r\n            .then((result) => result.json())\r\n            .then((dialogs) => {\r\n                dialogs.forEach((message) => {\r\n                    let handledDirection;\r\n                    if (message.status === 1) {\r\n                        message.direction === 1 ? handledDirection = \"incoming\" : handledDirection = \"outgoing\";\r\n                    }\r\n                    if (message.status === 0) {\r\n                        message.direction === 0 ? handledDirection = \"incoming\" : handledDirection = \"outgoing\";\r\n                    }\r\n                    addNewMessage(message.message, handledDirection, message.time)\r\n                })\r\n            })\r\n\r\n        socket.onopen = () => {\r\n            console.log(\"Соединение установлено. ChatApp \" + id_pair);\r\n        };\r\n        socket.onmessage = (event) => {\r\n            console.log(\"Данные получены ChatApp: \" + event.data);\r\n            const data = JSON.parse(event.data);\r\n\r\n            if (data.user_id.toString() !== props.myId.toString()) {\r\n                addNewMessage(data.message, \"incoming\")\r\n            }\r\n        };\r\n    }, [id_pair]);\r\n\r\n    const sendSocketMessage = (message) => {\r\n        if (!socket.readyState) {\r\n            setTimeout(function () {\r\n                socket.send(JSON.stringify({ 'message': message, 'user2_id': id, 'id_pair': id_pair }))\r\n            }, 200);\r\n        }\r\n        else {\r\n            socket.send(JSON.stringify({ 'message': message, 'user2_id': id, 'id_pair': id_pair }))\r\n        }\r\n    };\r\n    /**\r\n     * The following function saves any unsent message to that current conversation\r\n     * object\r\n     * @param {string} msg The saved message\r\n     */\r\n    const updateSaved = (msg) => {\r\n        const selectedConv = data[currentConv];\r\n        selectedConv.saved = msg;\r\n        const updatedData = { ...data };\r\n        updatedData[currentConv] = selectedConv;\r\n        setData(updatedData);\r\n    };\r\n\r\n    /**\r\n     * The following finds the message to be edited, adds this\r\n     * message to the text input and focuses on it.\r\n     * @param {number} index The index of the message to be edited\r\n     */\r\n    const enterEditMode = (index) => {\r\n        const savedMessage = data[currentConv].messages[index].message;\r\n        setEditIndex(index);\r\n        setSavedMsg(savedMessage);\r\n        setEditMode(true);\r\n        msgInput.current.focus();\r\n    };\r\n\r\n    /**\r\n     * This message updates a message and turns off \"edit mode\"\r\n     * @param {string} newMessage The updated message\r\n     */\r\n    const updateMessage = (newMessage) => {\r\n        if (newMessage.trim().length > 0) {\r\n            const selectedConv = data[currentConv];\r\n            const time = new Date().toLocaleString();\r\n            selectedConv.messages[editIndex].message = newMessage;\r\n            selectedConv.messages[editIndex].edit = time;\r\n            const updatedData = { ...data };\r\n            updatedData[currentConv] = selectedConv;\r\n            setData(updatedData);\r\n        }\r\n        setEditMode(false);\r\n        setSavedMsg(\"\");\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <MsgHeader\r\n                groupId={data[currentConv].groupId}\r\n                name={data[currentConv].name}\r\n                img={data[currentConv].img} />\r\n            <div className=\"chat-container\">\r\n                <ChatWindow\r\n                    messages={data[currentConv]}\r\n                    addNewMessage={addNewMessage}\r\n                    updateSaved={updateSaved}\r\n                    setSavedMsg={setSavedMsg}\r\n                    savedMsg={savedMsg}\r\n                    editMode={editMode}\r\n                    setEditMode={setEditMode}\r\n                    editIndex={editIndex}\r\n                    setEditIndex={setEditIndex}\r\n                    updateMessage={updateMessage}\r\n                    msgInput={msgInput}\r\n                    enterEditMode={enterEditMode}\r\n                    sendSocketMessage={sendSocketMessage}\r\n                />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\nconst mapStateToProps = (state) => {\r\n\r\n    return {\r\n        myId: state.myId,\r\n        sockets: state.sockets\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(ChatApp);\r\n","import React, {Component} from 'react';\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport Header from '../../header';\r\nimport SettingPage from '../settingPage';\r\nimport SabygramService from '../../../services/SabygramService';\r\nimport AddContact from '../../addContact/addContact';\r\nimport './contacts.scss';\r\n\r\nexport default class Contacts extends Component{\r\n    service = new SabygramService();\r\n\r\n    componentDidMount() {  \r\n        this.service.sendDataGet('/dialogs')\r\n        .then((dialogs) => dialogs.json())\r\n        .then((result) => {\r\n            this.setState({dialogs:result});\r\n        }) \r\n    }\r\n\r\n    state = {\r\n        slideGroup: \"all\",\r\n        itemsFound: null,\r\n        dialogs: []\r\n    }\r\n\r\n    slideChanged = (e) => {\r\n        if (e && e.activeIndex === 1) {\r\n            this.setState({\r\n                slideGroup: \"all\"\r\n            })\r\n        }\r\n        else this.setState({\r\n            slideGroup: null\r\n        })\r\n    }\r\n    renderSearchItems = (dialogs) => {\r\n        this.setState({\r\n            itemsFound: dialogs\r\n        })\r\n    }\r\n\r\n    addContact = () => {\r\n        return (<AddContact />)   \r\n    }\r\n\r\n    slideSettings = () => {\r\n        var mySwiper = document.querySelector('.swiper-container').swiper\r\n        mySwiper.slideTo(0);\r\n    }\r\n    \r\n    render(){\r\n        return(\r\n            <Swiper className=\"mySwiper\" initialSlide=\"1\" onSlideChange={this.slideChanged}>\r\n                <Header slot=\"container-start\" groupId={this.state.slideGroup} onSettings={this.slideSettings} onSearch={this.renderSearchItems} dialogs={this.state.dialogs}/>\r\n                <SwiperSlide>\r\n                    <SettingPage />\r\n                </SwiperSlide>\r\n    \r\n                <SwiperSlide>\r\n                    {this.addContact()}\r\n                    <RenderContact dialogs={this.state.dialogs} itemsFound={this.state.itemsFound}/>\r\n                </SwiperSlide>\r\n            </Swiper>\r\n        )\r\n    }\r\n    \r\n}\r\nconst RenderContact = ({dialogs, itemsFound = null }) => {\r\n    let toSearchIn = null;\r\n    if(dialogs.length !== 0)  itemsFound ? toSearchIn = itemsFound : toSearchIn = [...dialogs[0], ...dialogs[1], ...dialogs[2]];\r\n\r\n    if(toSearchIn)\r\n        return(\r\n        <div className=\"dialog-container\">{ \r\n            toSearchIn.map((dialog) => {\r\n                return <div key={dialog.id} className=\"contact\">\r\n                    <img src={dialog.img} alt=\"dialogPicture\" className=\"contacts-img\" />\r\n                    {dialog.name}</div>\r\n            })\r\n        }\r\n        </div>\r\n    )\r\n    else return <div></div>\r\n}\r\n","import React, { Component } from 'react';\r\nimport SabygramService from '../../services/SabygramService';\r\nimport './inviteFriend.scss';\r\n\r\nexport default class InviteFriend extends Component {\r\n\r\n  service = new SabygramService();\r\n  state = {\r\n    placeholder: 'Пригласить',\r\n    resultHidden: true,\r\n    defaultValue: null,\r\n    result: {},\r\n    loading: true\r\n  }\r\n\r\n\r\n  changePlaceholderFocus = () => {\r\n    this.setState({\r\n      placeholder: 'Имя',\r\n      defaultValue: \"\"\r\n    })\r\n  }\r\n\r\n  changePlaceholderBlur = () => {\r\n    this.setState({\r\n      placeholder: 'Пригласить',\r\n      defaultValue: null\r\n    })\r\n  }\r\n\r\n  changePhone = (e) => {\r\n    if (e.target.value.length === 12) {\r\n      this.setState({\r\n        loading: true\r\n      })\r\n      this.service.sendDataPost({ status: 1, phone: e.target.value.slice(2) }, '/contacts')\r\n        .then((result) => result.json())\r\n        .then((result) => {\r\n          this.setState({\r\n            result,\r\n            resultHidden: false,\r\n            loading: false\r\n          })\r\n        })\r\n    }\r\n  }\r\n  addContact = (e) => {\r\n    this.service.sendDataPost({ status: 2, user2_id: this.state.result.id }, '/contacts')\r\n      .then((result) => result.json())\r\n      .then((result) => {\r\n        if (result.dialog_id !== undefined) {\r\n          alert(\"Пользователь добавлен в список контактов!\")\r\n        }\r\n      })\r\n  }\r\n  renderResult() {\r\n    if (this.state.result.status === 1) {\r\n      return (\r\n        <>\r\n          <img src={this.state.result.image_link} alt=\"avatar\"></img>\r\n          <span>{this.state.result.name}</span>\r\n          <i className=\"fa fa-plus-circle\" aria-hidden=\"true\" onClick={this.addContact}></i>\r\n        </>\r\n      )\r\n    }\r\n    if (this.state.result.status === 0) {\r\n      return (\r\n        <p>Не найдено</p>\r\n      )\r\n    }\r\n    if (this.state.loading) {\r\n      return (\r\n        <p>Идёт поиск...</p>\r\n      )\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <form className='add-friend-form' >\r\n        <input type=\"tel\" className='add-friend' placeholder={this.state.placeholder} onFocus={this.changePlaceholderFocus} onBlur={this.changePlaceholderBlur} onChange={this.changePhone} maxLength=\"12\" defaultValue={this.state.defaultValue} />\r\n        <div className='add-friend-result-container' hidden={this.state.resultHidden}>\r\n          <div className=\"add-friend-result\">\r\n            {this.renderResult()}\r\n          </div>\r\n        </div>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ChatApp from '../../chatApp';\r\nimport InviteFriend from '../../inviteFriend/inviteFriend';\r\nimport './cinema.scss'\r\n\r\nexport default class Cinema extends Component {\r\n  state = {\r\n    link: 'https://www.youtube.com/embed/3jT_q7dt-cM',\r\n\r\n  }\r\n  changeLink = (e) => {\r\n    this.setState({\r\n      link: `${e.target.value}`\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className='cinema-page'>\r\n        {/* <iframe className=\"movie\" src={this.state.link} title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe> */}\r\n        <iframe className=\"movie\" width=\"560\" height=\"315\" src={this.state.link} frameborder=\"0\" allowfullscreen>\r\n        </iframe>\r\n        <div className='blue-div-link'>\r\n\r\n          <input className='link' value=\"https://www.youtube.com/embed/3jT_q7dt-cM\" placeholder='https://www.youtube.com/embed/3jT_q7dt-cM' onChange={this.changeLink} />\r\n          <InviteFriend />\r\n          <ChatApp />\r\n        </div>\r\n      </div>\r\n\r\n    )\r\n  }\r\n}","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport { Switch, Route } from 'react-router';\r\nimport Auth from '../pages/auth/auth';\r\nimport Edit from '../pages/edit/edit';\r\nimport Dialogs from '../pages/dialogs/dialogs';\r\nimport ChatApp from '../chatApp/index'\r\nimport Contacts from '../pages/contacts/contacts';\r\nimport Cinema from '../pages/cinema/cinema';\r\nimport TestWebSocket from '../test/test';\r\n\r\n\r\nconst App = () => {\r\n    return (\r\n        <Switch>\r\n\r\n            <Route exact path=\"/\" component={Auth} />\r\n            <Route path=\"/edit\" component={Edit} />\r\n            <Route path=\"/dialogs\" component={Dialogs} />\r\n            <Route path=\"/contacts\" component={Contacts} />\r\n            <Route path=\"/cinema\" component={Cinema} />\r\n            <Route path=\"/chatapp/:id\"\r\n                render={({ match }) => {\r\n                    const { id, groupId } = match.params;\r\n                    return <ChatApp dialogId={groupId} id={id} />\r\n                }}\r\n            />\r\n        </Switch>\r\n    )\r\n}\r\n\r\n\r\nexport default App;\r\n","const initialState = {\r\n    myId: '',\r\n    myUserName: '',\r\n    myWelcomeMessage: '',\r\n    myProfilePhoto: null,\r\n    myPassword: null,\r\n    myPhone: null,\r\n    sockets: [{\r\n        id: 100,\r\n        socket: new WebSocket('ws://' + window.location.host + '/ws/room/100/')\r\n    }],\r\n}\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case \"ADD_SOCKET\": {\r\n            let newSockets = [\r\n                ...state.sockets,\r\n                action.payload\r\n            ]\r\n            return {\r\n                ...state,\r\n                sockets: newSockets\r\n            }\r\n        }\r\n        case \"SET_MY_ID\": {\r\n            return {\r\n                ...state,\r\n                myId: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_PASSWORD\": {\r\n            return {\r\n                ...state,\r\n                myPassword: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_PHONE\": {\r\n            return {\r\n                ...state,\r\n                myPhone: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_PROFILE_PHOTO\": {\r\n            return {\r\n                ...state,\r\n                myProfilePhoto: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_WELCOME_MESSAGE\": {\r\n            return {\r\n                ...state,\r\n                myWelcomeMessage: action.payload\r\n            }\r\n        }\r\n        case \"SET_MY_USER_NAME\": {\r\n            return {\r\n                ...state,\r\n                myUserName: action.payload\r\n            }\r\n        }\r\n        case \"CLEAR_STATE\": {\r\n            return initialState;\r\n        }\r\n        case \"SHOULD_UPDATE\": {\r\n            return {\r\n                ...state,\r\n                shouldUpdate: action.payload\r\n            }\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import { createStore } from \"redux\";\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer); \r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\n\r\nimport store from './store';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}